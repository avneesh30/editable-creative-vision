"use strict";var e=require("react/jsx-runtime"),t=require("react"),a=require("react-dom/client"),r=require("@radix-ui/react-tooltip"),s=require("clsx"),n=require("tailwind-merge"),i=require("fabric"),o=require("file-saver"),l=require("sonner"),c=require("@radix-ui/react-slot"),d=require("class-variance-authority"),u=require("lucide-react"),m=require("@radix-ui/react-tabs"),f=require("@radix-ui/react-scroll-area"),h=require("psd.js"),p=require("@radix-ui/react-slider"),g=require("@radix-ui/react-label"),x=require("react-color"),v=require("@radix-ui/react-popover"),b=require("@radix-ui/react-separator"),y=require("lodash.debounce"),j=require("@radix-ui/react-context-menu"),N=require("@radix-ui/react-select"),w=require("@radix-ui/react-dialog"),S=require("@radix-ui/react-toast");function C(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var k=C(t),z=C(r),A=C(m),F=C(f),T=C(p),P=C(g),O=C(v),R=C(b),E=C(j),L=C(N),U=C(w),D=C(S),I=function(){return I=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},I.apply(this,arguments)};function W(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}function M(e,t,a,r){return new(a||(a=Promise))((function(s,n){function i(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))}function B(e,t){var a,r,s,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(n=0)),n;)try{if(a=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,r=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(!(s=n.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){n=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(6===o[0]&&n.label<s[1]){n.label=s[1],s=o;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(o);break}s[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],r=0}finally{a=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function q(e,t,a){if(a||2===arguments.length)for(var r,s=0,n=t.length;s<n;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function J(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.twMerge(s.clsx(e))}"function"==typeof SuppressedError&&SuppressedError;var H=z.Provider,V=z.Root,K=z.Trigger,G=k.forwardRef((function(t,a){var r=t.className,s=t.sideOffset,n=void 0===s?4:s,i=W(t,["className","sideOffset"]);return e.jsx(z.Content,I({ref:a,sideOffset:n,className:J("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},i))}));G.displayName=z.Content.displayName;var X=function(e){if("text"===e.type||"i-text"===e.type||"textbox"===e.type){var t=e;t.fontFamily||(t.set("fontFamily","Arial"),console.log("Fixed missing fontFamily")),t.fontSize&&!isNaN(t.fontSize)||(t.set("fontSize",20),console.log("Fixed missing or invalid fontSize")),t.fontStyle&&["","normal","italic","oblique"].includes(t.fontStyle)||(t.set("fontStyle","normal"),console.log("Fixed invalid fontStyle")),void 0!==t.fontWeight&&null!==t.fontWeight||(t.set("fontWeight","normal"),console.log("Fixed missing fontWeight")),void 0!==t.textAlign&&null!==t.textAlign||(t.set("textAlign","left"),console.log("Fixed missing textAlign")),void 0===t.underline&&t.set("underline",!1),void 0===t.backgroundColor&&t.set("backgroundColor",""),(void 0===t.lineHeight||isNaN(t.lineHeight))&&t.set("lineHeight",1.16),t._forceClearCache=!0}},Y=function(e,a,r){return{initCanvas:t.useCallback((function(t){if(t){var s=new i.fabric.Canvas(t,{backgroundColor:"#ffffff",width:e.width,height:e.height,preserveObjectStacking:!0,skipOffscreen:!0});return s.on("selection:created",(function(e){var t,r=(null===(t=e.selected)||void 0===t?void 0:t[0])||null;if(r)try{X(r),console.log("Fixed properties on selection:created")}catch(e){console.error("Error fixing properties on selection:created",e)}a(r)})),s.on("selection:updated",(function(e){var t,r=(null===(t=e.selected)||void 0===t?void 0:t[0])||null;if(r)try{X(r),console.log("Fixed properties on selection:updated")}catch(e){console.error("Error fixing properties on selection:updated",e)}a(r)})),s.on("selection:cleared",(function(){a(null)})),s.on("object:modified",(function(e){if(e.target)try{X(e.target),console.log("Fixed properties on object:modified")}catch(e){console.error("Error fixing properties on object:modified",e)}r()})),s.on("object:added",(function(e){if(e.target)try{X(e.target),console.log("Fixed properties on object:added")}catch(e){console.error("Error fixing properties on object:added",e)}})),setTimeout((function(){try{!function(e){if(e)try{e.getObjects().forEach((function(e){try{X(e)}catch(e){console.error("Error fixing text object:",e)}}))}catch(e){console.error("Error in fixAllTextObjectsSafely:",e)}}(s),s.requestRenderAll()}catch(e){console.error("Error in initial text fix:",e)}}),100),s}}),[e,a,r])}},_=function(e,t){for(var a=[],r=2*Math.PI/e,s=0;s<e;s++){var n=s*r-Math.PI/2;a.push({x:t*Math.cos(n),y:t*Math.sin(n)})}return a},Z=function(e){if(!e)return e;try{e.fontFamily||(e.set("fontFamily","Arial"),console.log("Fixed missing fontFamily in helper")),e.fontSize&&!isNaN(e.fontSize)||(e.set("fontSize",20),console.log("Fixed missing or invalid fontSize in helper")),e.fontStyle&&["","normal","italic","oblique"].includes(e.fontStyle)||(e.set("fontStyle","normal"),console.log("Fixed invalid fontStyle in helper")),void 0!==e.fontWeight&&null!==e.fontWeight||(e.set("fontWeight","normal"),console.log("Fixed missing fontWeight in helper")),void 0!==e.textAlign&&null!==e.textAlign||(e.set("textAlign","left"),console.log("Fixed missing textAlign in helper")),void 0!==e.fill&&null!==e.fill||e.set("fill","#000000"),e._forceClearCache=!0}catch(e){console.error("Error in ensureValidTextProperties:",e)}return e},Q=function(e,t,a){return{addText:function(r,s){if(void 0===s&&(s={}),e)try{var n=I({},s),o=I({left:100,top:100,fontFamily:"Arial",fontSize:20,fontWeight:"normal",fontStyle:"normal",textAlign:"left",fill:"#000000"},n);o.fontFamily||(o.fontFamily="Arial"),o.fontSize&&!isNaN(o.fontSize)||(o.fontSize=20),o.fill||(o.fill="#000000"),o.fontStyle&&["","normal","italic","oblique"].includes(o.fontStyle)||(o.fontStyle="normal");var l=new i.fabric.IText(r||"Text",o);Z(l),console.log("Text object created with properties:",{fontFamily:l.fontFamily,fontSize:l.fontSize,fontWeight:l.fontWeight,fontStyle:l.fontStyle,textAlign:l.textAlign,fill:l.fill}),e.add(l),e.setActiveObject(l),t(l),l.textAlign&&(l.set("textAlign",l.textAlign),e.requestRenderAll()),e.renderAll(),a()}catch(e){console.error("Error creating text object:",e)}},addRect:function(r){if(void 0===r&&(r={}),e)try{var s=new i.fabric.Rect(I({left:100,top:100,width:r.width||100,height:r.height||100,fill:r.fill||"#1e88e5",stroke:r.stroke||void 0,strokeWidth:r.strokeWidth||0,rx:r.rx||0,ry:r.ry||0,selectable:!0,hasControls:!0,hasBorders:!0},r));console.log("Created rectangle with properties:",{left:s.left,top:s.top,width:s.width,height:s.height,fill:s.fill,selectable:s.selectable}),e.add(s),e.setActiveObject(s),t(s),e.renderAll(),a()}catch(e){console.error("Error creating rectangle:",e)}},addCircle:function(r){if(void 0===r&&(r={}),e)try{var s=new i.fabric.Circle(I({left:100,top:100,radius:r.radius||50,fill:r.fill||"#4caf50",stroke:r.stroke||void 0,strokeWidth:r.strokeWidth||0,selectable:!0,hasControls:!0,hasBorders:!0},r));console.log("Created circle with properties:",{left:s.left,top:s.top,radius:s.radius,fill:s.fill,selectable:s.selectable}),e.add(s),e.setActiveObject(s),t(s),e.renderAll(),a()}catch(e){console.error("Error creating circle:",e)}},addTriangle:function(r){if(void 0===r&&(r={}),e)try{var s=new i.fabric.Triangle(I({left:100,top:100,width:r.width||100,height:r.height||100,fill:r.fill||"#ff9800",stroke:r.stroke||void 0,strokeWidth:r.strokeWidth||0,selectable:!0,hasControls:!0,hasBorders:!0},r));console.log("Created triangle with properties:",{left:s.left,top:s.top,width:s.width,height:s.height,fill:s.fill,selectable:s.selectable}),e.add(s),e.setActiveObject(s),t(s),e.renderAll(),a()}catch(e){console.error("Error creating triangle:",e)}},addImage:function(r,s){void 0===s&&(s={}),e&&i.fabric.Image.fromURL(r,(function(r){try{if(r.width&&r.height&&(r.width>300||r.height>300)){var n=300/r.width,i=300/r.height,o=Math.min(n,i);r.scale(o)}r.set(I({left:100,top:100,selectable:!0,hasControls:!0,hasBorders:!0},s)),console.log("Created image with properties:",{left:r.left,top:r.top,width:r.width,height:r.height,selectable:r.selectable}),e.add(r),e.setActiveObject(r),t(r),e.renderAll(),a()}catch(e){console.error("Error processing image:",e)}}),{crossOrigin:"anonymous"})},addShape:function(t,a){if(void 0===a&&(a={}),e){var r,s="#4CAF50",n="#000000";switch(t){case"rect":case"square":default:r=new i.fabric.Rect({left:100,top:100,width:100,height:100,fill:s,stroke:n,strokeWidth:1});break;case"circle":r=new i.fabric.Circle({left:100,top:100,radius:50,fill:s,stroke:n,strokeWidth:1});break;case"triangle":r=new i.fabric.Triangle({left:100,top:100,width:100,height:100,fill:s,stroke:n,strokeWidth:1});break;case"diamond":r=new i.fabric.Rect({left:100,top:100,width:100,height:100,fill:s,stroke:n,strokeWidth:1,angle:45});break;case"ellipse":r=new i.fabric.Ellipse({left:100,top:100,rx:60,ry:40,fill:s,stroke:n,strokeWidth:1});break;case"pentagon":var o=_(5,50);r=new i.fabric.Polygon(o,{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"hexagon":var l=_(6,50);r=new i.fabric.Polygon(l,{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"octagon":var c=_(8,50);r=new i.fabric.Polygon(c,{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"star":var d=function(e,t,a){for(var r=[],s=Math.PI/e,n=0;n<2*e;n++){var i=n*s-Math.PI/2,o=n%2==0?t:a;r.push({x:o*Math.cos(i),y:o*Math.sin(i)})}return r}(5,50,25);r=new i.fabric.Polygon(d,{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"heart":r=new i.fabric.Path("M 25,45 A 14,14 0,0,1 0,30 A 14,14 0,0,1 25,15 A 14,14 0,0,1 50,30 A 14,14 0,0,1 25,45 z",{left:100,top:100,fill:s,stroke:n,strokeWidth:1,scaleX:2,scaleY:2});break;case"arrow":var u=void 0;switch(a.direction||"right"){case"right":default:u="M 0,20 L 80,20 L 80,10 L 100,25 L 80,40 L 80,30 L 0,30 z";break;case"left":u="M 100,20 L 20,20 L 20,10 L 0,25 L 20,40 L 20,30 L 100,30 z";break;case"up":u="M 25,100 L 25,20 L 10,20 L 25,0 L 40,20 L 30,20 L 30,100 z";break;case"down":u="M 25,0 L 25,80 L 10,80 L 25,100 L 40,80 L 30,80 L 30,0 z"}r=new i.fabric.Path(u,{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"callout":var m=void 0;m="circle"===(a.type||"square")?"M 50,0 A 50,50 0 1,0 50,100 A 50,50 0 1,0 50,0 M 30,100 L 25,120 L 60,95":"M 0,0 L 100,0 L 100,80 L 70,80 L 50,100 L 50,80 L 0,80 z",r=new i.fabric.Path(m,{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"plus":r=new i.fabric.Path("M 40,0 L 60,0 L 60,40 L 100,40 L 100,60 L 60,60 L 60,100 L 40,100 L 40,60 L 0,60 L 0,40 L 40,40 z",{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"badge":r=new i.fabric.Path("M 50,0 L 61,35 L 98,35 L 68,57 L 79,91 L 50,70 L 21,91 L 32,57 L 2,35 L 39,35 z",{left:100,top:100,fill:s,stroke:n,strokeWidth:1});break;case"grid":for(var f=100,h=[],p=0;p<=f;p+=20)h.push(new i.fabric.Line([0,p,f,p],{stroke:n,strokeWidth:1}));for(p=0;p<=f;p+=20)h.push(new i.fabric.Line([p,0,p,f],{stroke:n,strokeWidth:1}));r=new i.fabric.Group(h,{left:100,top:100})}return e.add(r),e.setActiveObject(r),e.requestRenderAll(),e.fire("object:added",{target:r}),r}},createBusinessCardTemplate:function(){if(e)try{e.clear(),e.setBackgroundColor("#ffffff",e.renderAll.bind(e));!function(){try{var t=new i.fabric.IText("Juliana Silva",{left:500,top:190,fontFamily:"Arial",fontSize:60,fill:"#333333",originX:"center",fontWeight:"normal",fontStyle:"normal",textAlign:"center",selectable:!0,hasControls:!0,hasBorders:!0});Z(t),e.add(t);var r=new i.fabric.IText("123-456-7890",{left:550,top:320,fontFamily:"Arial",fontSize:20,fill:"#333333",fontWeight:"normal",fontStyle:"normal",textAlign:"left",selectable:!0,hasControls:!0,hasBorders:!0});Z(r);var s=new i.fabric.Text("",{left:510,top:323,fontFamily:"Arial",fontSize:24,fill:"#333333",text:"ï‚•",fontWeight:"normal",fontStyle:"normal",textAlign:"left",selectable:!0,hasControls:!0,hasBorders:!0});Z(s),e.add(r),e.add(s);var n=new i.fabric.Circle({radius:80,fill:"#e0e0e0",left:100,top:100,originX:"center",originY:"center",selectable:!0,hasControls:!0,hasBorders:!0}),o=new i.fabric.IText("Photo",{left:100,top:100,fontFamily:"Arial",fontSize:16,fill:"#666666",originX:"center",originY:"center",fontWeight:"normal",fontStyle:"normal",textAlign:"center",selectable:!0,hasControls:!0,hasBorders:!0});Z(o),e.add(n,o),e.renderAll(),a()}catch(e){console.error("Error creating business card elements:",e)}}()}catch(e){console.error("Error in createBusinessCardTemplate:",e)}}}},$=800,ee=600,te=function(a){var r=a.children,s=a.initialWidth,n=a.initialHeight,c=a.initialTemplate,d={width:s||$,height:n||ee},u=t.useState(null),m=u[0],f=u[1],h=t.useState(null),p=h[0],g=h[1],x=function(){var e=t.useRef([]),a=t.useRef([]),r=t.useState(!1),s=r[0],n=r[1],i=t.useState(!1),o=i[0],l=i[1];return t.useEffect((function(){n(e.current.length>1),l(a.current.length>0)}),[e.current.length,a.current.length]),{saveToHistory:function(t){if(t)try{var r=JSON.stringify(t.toJSON(["id","selectable","hasControls","hasBorders"]));e.current.push(r),a.current=[],e.current.length>50&&e.current.shift(),n(e.current.length>1),l(!1),console.log("Saved to history, undo stack length:",e.current.length)}catch(e){console.error("Error saving canvas state to history:",e)}},undo:function(t){if(t&&!(e.current.length<=1))try{var r=e.current.pop()||"";a.current.push(r);var s=e.current[e.current.length-1];s&&t.loadFromJSON(JSON.parse(s),(function(){t.renderAll(),console.log("Undo: Loaded previous state from history")})),n(e.current.length>1),l(a.current.length>0)}catch(e){console.error("Error in undo operation:",e)}},redo:function(t){if(t&&0!==a.current.length)try{var r=a.current.pop();r&&(e.current.length,t.loadFromJSON(JSON.parse(r),(function(){t.renderAll(),console.log("Redo: Loaded next state from history"),e.current.push(r)}))),n(!0),l(a.current.length>0)}catch(e){console.error("Error in redo operation:",e)}},canUndo:s,canRedo:o}}(),v=x.saveToHistory,b=x.undo,y=x.redo,j=x.canUndo,N=x.canRedo,w=function(e){var a=t.useState(!1),r=a[0],s=a[1],n=t.useCallback((function(){e&&(s(!0),e.defaultCursor="grab",e.getObjects().forEach((function(e){e.selectable=!1,e.evented=!1})),e.selection=!1,e.renderAll(),e.on("mouse:down",(function(t){var a=t.e;r&&(this.isDragging=!0,this.selection=!1,this.lastPosX=a.clientX,this.lastPosY=a.clientY,e.defaultCursor="grabbing")})),e.on("mouse:move",(function(e){if(this.isDragging&&r){var t=e.e,a=this.viewportTransform;a&&void 0!==this.lastPosX&&void 0!==this.lastPosY&&(a[4]+=t.clientX-this.lastPosX,a[5]+=t.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=t.clientX,this.lastPosY=t.clientY)}})),e.on("mouse:up",(function(){this.isDragging=!1,this.selection=!0,e.defaultCursor="grab"})))}),[e,r]),i=t.useCallback((function(){e&&(s(!1),e.defaultCursor="default",e.getObjects().forEach((function(e){e.selectable=!0,e.evented=!0})),e.selection=!0,e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.renderAll())}),[e]);return{isPanEnabled:r,enablePan:n,disablePan:i}}(m),S=w.isPanEnabled,C=w.enablePan,k=w.disablePan,z=function(e){return{setCursor:t.useCallback((function(t){e&&(e.defaultCursor=t)}),[e])}}(m).setCursor,A=function(e,a){var r=t.useState("#ffffff"),s=r[0],n=r[1];return{canvasBackgroundColor:s,setCanvasBackgroundColor:t.useCallback((function(t){e&&(e.backgroundColor=t,n(t),e.renderAll(),a())}),[e,a])}}(m,(function(){return v(m)})),F=A.canvasBackgroundColor,T=A.setCanvasBackgroundColor,P=function(e,a,r,s){var n=t.useState("select"),i=n[0],o=n[1];return t.useEffect((function(){if(e)switch(r&&"select"!==i&&s(),e.isDrawingMode="draw"===i,"draw"===i&&(e.freeDrawingBrush.width=2,e.freeDrawingBrush.color="#000000"),i){case"select":default:a("default");break;case"draw":case"shape":a("crosshair");break;case"text":a("text");break;case"image":a("cell")}}),[i,e,r,s,a]),{mode:i,setMode:o}}(m,z,S,k),O=P.mode,R=P.setMode,E=function(e,a,r){var s=t.useState(a),n=s[0],i=s[1];return{canvasSize:n,setCanvasSize:t.useCallback((function(t){e&&(i(t),e.setWidth(t.width),e.setHeight(t.height),e.renderAll(),r())}),[e,r])}}(m,d,(function(){return v(m)})),L=E.canvasSize,U=E.setCanvasSize;!function(e,a){t.useEffect((function(){if(e){var t=function(){console.log("Object modified - saving to history"),a(e)},r=function(){console.log("Object added - saving to history"),a(e)},s=function(){console.log("Object removed - saving to history"),a(e)};return e.on("object:modified",t),e.on("object:added",r),e.on("object:removed",s),a(e),function(){e.off("object:modified",t),e.off("object:added",r),e.off("object:removed",s)}}}),[e,a])}(m,v);var D=Y(L,g,(function(){return v(m)})).initCanvas,I=t.useCallback((function(e){if(e){var t=D(e);return t?(f(t),t):void 0}}),[D]);t.useEffect((function(){if(m&&c)try{m.loadFromJSON(JSON.parse(c),(function(){m.renderAll(),v(m)}))}catch(e){console.error("Failed to load initial template:",e)}}),[m,c,v]);var W=Q(m,g,(function(){return v(m)})),J=W.addText,H=W.addRect,V=W.addCircle,K=W.addTriangle,G=W.addImage,X=W.addShape,_=W.createBusinessCardTemplate,Z=function(e,t,a){return{removeActiveObject:function(){if(e&&e.getActiveObject()){var r=e.getActiveObject();if(r instanceof i.fabric.ActiveSelection)r.getObjects().forEach((function(t){e.remove(t)})),e.discardActiveObject();else{var s=e.getActiveObject();s&&e.remove(s)}t(null),e.renderAll(),a()}},bringForward:function(){if(e){var t=e.getActiveObject();t&&(e.bringForward(t),e.renderAll(),a())}},sendBackward:function(){if(e){var t=e.getActiveObject();t&&(e.sendBackwards(t),e.renderAll(),a())}},bringToFront:function(){if(e){var t=e.getActiveObject();t&&(e.bringToFront(t),e.renderAll(),a())}},sendToBack:function(){if(e){var t=e.getActiveObject();t&&(e.sendToBack(t),e.renderAll(),a())}},groupSelected:function(){if(e&&e.getActiveObject()){var t=e.getActiveObject();if(t&&t.type&&"activeSelection"===t.type){var r=t.toGroup();e.setActiveObject(r),a()}}},ungroupSelected:function(){if(e&&e.getActiveObject()){var t=e.getActiveObject();if(t&&t.type&&"group"===t.type){var r=t.toActiveSelection();e.setActiveObject(r),e.requestRenderAll(),a()}}},cloneSelected:function(){if(e&&e.getActiveObject()){var r=e.getActiveObject();r&&r.clone((function(r){r.set({left:(r.left||0)+20,top:(r.top||0)+20}),e.add(r),e.setActiveObject(r),t(r),a()}))}},selectAll:function(){if(e){var a=e.getObjects();if(0!==a.length){if(1===a.length)e.setActiveObject(a[0]);else{var r=new i.fabric.ActiveSelection(a,{canvas:e});e.setActiveObject(r)}e.requestRenderAll(),t(e.getActiveObject())}}},clearCanvas:function(){e&&(e.clear(),e.backgroundColor="#ffffff",e.requestRenderAll(),t(null),a())}}}(m,g,(function(){return v(m)})),te=Z.removeActiveObject,re=Z.bringForward,se=Z.sendBackward,ne=Z.bringToFront,ie=Z.sendToBack,oe=Z.groupSelected,le=Z.ungroupSelected,ce=Z.cloneSelected,de=Z.selectAll,ue=Z.clearCanvas,me=function(e){return{saveToJSON:function(){return e?JSON.stringify(e.toJSON(["id","name"])):""},loadFromJSON:function(t){if(e)try{e.loadFromJSON(JSON.parse(t),(function(){e.renderAll()}))}catch(e){console.error("Error loading from JSON:",e)}},exportToImage:function(t){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];return M(void 0,q([t],a,!0),void 0,(function(t,a){var r,s,n;return void 0===a&&(a="normal"),B(this,(function(i){return e?"svg"===t?(r=e.toSVG(),[2,"data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(r))]):(s="high"===a?2:1,n="jpeg"===t?.92:1,[2,e.toDataURL({format:"jpeg"===t?"jpeg":"png",quality:n,multiplier:s})]):[2,""]}))}))},exportToHTML:function(){if(!e)return"";var t=e.toSVG();return'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <title>Exported Design</title>\n  <style>\n    body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }\n    .canvas-container { box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); }\n  </style>\n</head>\n<body>\n  <div class="canvas-container">\n    '.concat(t,"\n  </div>\n</body>\n</html>")},downloadImage:function(t,a){if(void 0===a&&(a="normal"),e)if("svg"!==t){var r="high"===a?2:1,s="jpeg"===t?.92:1,n=e.toDataURL({format:"jpeg"===t?"jpeg":"png",quality:s,multiplier:r}),i=document.createElement("a");i.href=n,i.download="design.".concat(t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}else{var l=e.toSVG(),c=new Blob([l],{type:"image/svg+xml"});o.saveAs(c,"design.svg")}},createTemplateFromImage:function(t,a){return e?{thumbnailUrl:e.toDataURL({format:"jpeg",quality:.7,multiplier:.5}),canvasJson:JSON.stringify(e.toJSON(["id","name"])),size:{width:e.width||800,height:e.height||600}}:{thumbnailUrl:"",canvasJson:"",size:{width:0,height:0}}}}}(m),fe=me.saveToJSON,he=me.loadFromJSON,pe=me.exportToImage,ge=me.exportToHTML,xe=me.downloadImage,ve=function(e,a){var r=t.useState(1),s=r[0],n=r[1];t.useEffect((function(){e&&(e.setDimensions({width:a.width,height:a.height}),e.renderAll())}),[e,a]);var i=t.useCallback((function(t){e&&(e.setZoom(t),e.setDimensions({width:a.width*t,height:a.height*t}),e.renderAll())}),[e,a]),o=t.useCallback((function(){if(e){var t=Math.min(s+.1,3);n(t),i(t)}}),[e,s,i]),l=t.useCallback((function(){if(e){var t=Math.max(s-.1,.1);n(t),i(t)}}),[e,s,i]),c=t.useCallback((function(){e&&(n(1),i(1))}),[e,i]);return{zoom:s,zoomIn:o,zoomOut:l,resetZoom:c}}(m,L),be=ve.zoom,ye=ve.zoomIn,je=ve.zoomOut,Ne=ve.resetZoom,we=function(e,a){var r=t.useState(null),s=r[0],n=r[1];return{copyToClipboard:function(){if(e){var t=e.getActiveObject();t?t.clone((function(e){n(JSON.stringify(e.toJSON())),l.toast.success("Copied to clipboard")}),["data"]):l.toast.error("No object selected to copy")}},pasteFromClipboard:function(){if(e&&s)try{var t=e.getActiveObject();t?i.fabric.util.enlivenObjects([JSON.parse(s)],(function(r){if(r.length>0){var s=r[0];s.set({left:t.left,top:t.top,scaleX:t.scaleX,scaleY:t.scaleY,angle:t.angle}),e.remove(t),e.add(s),e.setActiveObject(s),e.renderAll(),a(),l.toast.success("Object replaced")}}),"fabric"):i.fabric.util.enlivenObjects([JSON.parse(s)],(function(t){if(t.length>0){var r=t[0];r.set({left:(r.left||0)+20,top:(r.top||0)+20}),e.add(r),e.setActiveObject(r),e.renderAll(),a(),l.toast.success("Pasted from clipboard")}}),"fabric")}catch(e){console.error("Error pasting from clipboard:",e),l.toast.error("Error pasting from clipboard")}else s||l.toast.error("Nothing to paste")},pasteAtPosition:function(t,r){if(e&&s)try{i.fabric.util.enlivenObjects([JSON.parse(s)],(function(s){if(s.length>0){var n=s[0];n.set({left:t-(n.width||0)*(n.scaleX||1)/2,top:r-(n.height||0)*(n.scaleY||1)/2}),e.add(n),e.setActiveObject(n),e.renderAll(),a(),l.toast.success("Pasted from clipboard")}}),"fabric")}catch(e){console.error("Error pasting from clipboard:",e),l.toast.error("Error pasting from clipboard")}else s||l.toast.error("Nothing to paste")}}}(m,(function(){return v(m)})),Se=we.copyToClipboard,Ce=we.pasteFromClipboard,ke=we.pasteAtPosition,ze=t.useCallback((function(){console.log("Undo triggered in Editor Provider"),b(m)}),[b,m]),Ae=t.useCallback((function(){console.log("Redo triggered in Editor Provider"),y(m)}),[y,m]),Fe=t.useMemo((function(){return{canvas:m,activeObject:p,mode:O,setMode:R,canvasSize:L,setCanvasSize:U,canvasBackgroundColor:F,setCanvasBackgroundColor:T,initCanvas:I,addText:J,addRect:H,addCircle:V,addImage:G,addTriangle:K,removeActiveObject:te,bringForward:re,sendBackward:se,bringToFront:ne,sendToBack:ie,groupSelected:oe,ungroupSelected:le,cloneSelected:ce,saveToJSON:fe,loadFromJSON:he,exportToImage:pe,exportToHTML:ge,zoomIn:ye,zoomOut:je,resetZoom:Ne,undo:ze,redo:Ae,downloadImage:xe,copyToClipboard:Se,pasteFromClipboard:Ce,pasteAtPosition:ke,setCursor:z,zoom:be,createBusinessCardTemplate:_,selectAll:de,clearCanvas:ue,saveToHistory:v,canUndo:j,canRedo:N,addShape:X,enablePan:C,disablePan:k,isPanEnabled:S}}),[m,p,O,L,I,J,H,V,G,K,te,re,se,ne,ie,oe,le,ce,fe,he,pe,ge,ye,je,Ne,ze,Ae,xe,Se,Ce,ke,be,_,de,ue,U,v,j,N,X,F,T,C,k,S,z]);return e.jsx(ae.Provider,{value:Fe,children:r})},ae=t.createContext(null),re=function(){var e=t.useContext(ae);if(!e)throw new Error("useEditor must be used within an EditorProvider");return e},se=function(t){var a=t.children,r=t.initialWidth,s=t.initialHeight,n=t.initialTemplate;return e.jsx(te,{initialWidth:r,initialHeight:s,initialTemplate:n,children:a})},ne=d.cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ie=k.forwardRef((function(t,a){var r=t.className,s=t.variant,n=t.size,i=t.asChild,o=void 0!==i&&i,l=W(t,["className","variant","size","asChild"]),d=o?c.Slot:"button";return e.jsx(d,I({className:J(ne({variant:s,size:n,className:r})),ref:a},l))}));ie.displayName="Button";var oe=function(t){var a=t.onExport,r=t.onSave,s=t.onUndo,n=t.onRedo,i=t.onZoomIn,o=t.onZoomOut,l=t.onResetZoom,c=t.toggleLeftSidebar,d=t.toggleRightSidebar,m=t.zoom;t.onSelectAll,t.onClearCanvas;var f=t.onResizeCanvas,h=re(),p=h.mode,g=h.setMode,x=h.addText,v=h.addRect,b=h.addCircle,y=h.removeActiveObject,j=h.selectAll,N=h.clearCanvas;h.canvas;return e.jsx("div",{className:"editor-toolbar",children:e.jsxs(H,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:c,className:"h-9 w-9",children:e.jsx(u.PanelLeft,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Toggle Sidebar"})]}),e.jsx("div",{className:"bg-secondary h-6 w-px mx-1"}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"select"===p?"default":"ghost",size:"icon",onClick:function(){return g("select")},className:"h-9 w-9",children:e.jsx(u.MousePointer,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Select (V)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"text"===p?"default":"ghost",size:"icon",onClick:function(){g("text"),x("New text")},className:"h-9 w-9",children:e.jsx(u.Type,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Add Text (T)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"shape"===p?"default":"ghost",size:"icon",onClick:function(){g("shape"),v()},className:"h-9 w-9",children:e.jsx(u.Square,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Add Rectangle (R)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"shape"===p?"default":"ghost",size:"icon",onClick:function(){g("shape"),b()},className:"h-9 w-9",children:e.jsx(u.Circle,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Add Circle (C)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"image"===p?"default":"ghost",size:"icon",onClick:function(){return g("image")},className:"h-9 w-9",children:e.jsx(u.Image,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Add Image (I)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"draw"===p?"default":"ghost",size:"icon",onClick:function(){return g("draw")},className:"h-9 w-9",children:e.jsx(u.Pencil,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Draw (D)"})]}),e.jsx("div",{className:"bg-secondary h-6 w-px mx-1"}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:function(){return j()},className:"h-9 w-9",children:e.jsx(u.CheckSquare,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Select All (Ctrl+A)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:function(){return N()},className:"h-9 w-9",children:e.jsx(u.X,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Clear Canvas (Shift+Esc)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:f,className:"h-9 w-9",children:e.jsx(u.Move3d,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Resize Canvas"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto mr-auto",children:[e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:o,className:"h-9 w-9",children:e.jsx(u.ZoomOut,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Zoom Out (-)"})]}),e.jsxs("div",{className:"text-sm font-medium w-16 text-center",children:[Math.round(100*m),"%"]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:i,className:"h-9 w-9",children:e.jsx(u.ZoomIn,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Zoom In (+)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:l,className:"h-9 w-9",children:e.jsx(u.RotateCcw,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Reset Zoom (0)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:function(e){e.preventDefault(),console.log("Undo button clicked"),s()},className:"h-9 w-9",children:e.jsx(u.Undo,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Undo (Ctrl+Z)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:function(e){e.preventDefault(),console.log("Redo button clicked"),n()},className:"h-9 w-9",children:e.jsx(u.Redo,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Redo (Ctrl+Y)"})]}),e.jsx("div",{className:"bg-secondary h-6 w-px mx-1"}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:y,className:"h-9 w-9",children:e.jsx(u.Trash,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Delete (Del)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",className:"h-9 w-9",children:e.jsx(u.Copy,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Copy (Ctrl+C)"})]}),e.jsx("div",{className:"bg-secondary h-6 w-px mx-1"}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:r,className:"h-9 w-9",children:e.jsx(u.Save,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Save (Ctrl+S)"})]}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:function(){return a("png")},className:"h-9 w-9",children:e.jsx(u.Download,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Export"})]}),e.jsx("div",{className:"bg-secondary h-6 w-px mx-1"}),e.jsxs(V,{children:[e.jsx(K,{asChild:!0,children:e.jsx(ie,{variant:"ghost",size:"icon",onClick:d,className:"h-9 w-9",children:e.jsx(u.PanelRight,{className:"h-5 w-5"})})}),e.jsx(G,{children:"Toggle Properties"})]})]})]})})},le=A.Root,ce=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(A.List,I({ref:a,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r)},s))}));ce.displayName=A.List.displayName;var de=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(A.Trigger,I({ref:a,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r)},s))}));de.displayName=A.Trigger.displayName;var ue=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(A.Content,I({ref:a,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r)},s))}));ue.displayName=A.Content.displayName;var me=k.forwardRef((function(t,a){var r=t.className,s=t.children,n=W(t,["className","children"]);return e.jsxs(F.Root,I({ref:a,className:J("relative overflow-hidden",r)},n,{children:[e.jsx(F.Viewport,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(fe,{}),e.jsx(F.Corner,{})]}))}));me.displayName=F.Root.displayName;var fe=k.forwardRef((function(t,a){var r=t.className,s=t.orientation,n=void 0===s?"vertical":s,i=W(t,["className","orientation"]);return e.jsx(F.ScrollAreaScrollbar,I({ref:a,orientation:n,className:J("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r)},i,{children:e.jsx(F.ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}))}));fe.displayName=F.ScrollAreaScrollbar.displayName;var he=0;var pe=new Map,ge=function(e){if(!pe.has(e)){var t=setTimeout((function(){pe.delete(e),ye({type:"REMOVE_TOAST",toastId:e})}),1e6);pe.set(e,t)}},xe=function(e,t){switch(t.type){case"ADD_TOAST":return I(I({},e),{toasts:q([t.toast],e.toasts,!0).slice(0,1)});case"UPDATE_TOAST":return I(I({},e),{toasts:e.toasts.map((function(e){return e.id===t.toast.id?I(I({},e),t.toast):e}))});case"DISMISS_TOAST":var a=t.toastId;return a?ge(a):e.toasts.forEach((function(e){ge(e.id)})),I(I({},e),{toasts:e.toasts.map((function(e){return e.id===a||void 0===a?I(I({},e),{open:!1}):e}))});case"REMOVE_TOAST":return void 0===t.toastId?I(I({},e),{toasts:[]}):I(I({},e),{toasts:e.toasts.filter((function(e){return e.id!==t.toastId}))})}},ve=[],be={toasts:[]};function ye(e){be=xe(be,e),ve.forEach((function(e){e(be)}))}function je(e){var t=W(e,[]),a=(he=(he+1)%Number.MAX_SAFE_INTEGER).toString(),r=function(){return ye({type:"DISMISS_TOAST",toastId:a})};return ye({type:"ADD_TOAST",toast:I(I({},t),{id:a,open:!0,onOpenChange:function(e){e||r()}})}),{id:a,dismiss:r,update:function(e){return ye({type:"UPDATE_TOAST",toast:I(I({},e),{id:a})})}}}function Ne(){var e=k.useState(be),t=e[0],a=e[1];return k.useEffect((function(){return ve.push(a),function(){var e=ve.indexOf(a);e>-1&&ve.splice(e,1)}}),[t]),I(I({},t),{toast:je,dismiss:function(e){return ye({type:"DISMISS_TOAST",toastId:e})}})}var we=k.forwardRef((function(t,a){var r=t.className,s=t.type,n=W(t,["className","type"]);return e.jsx("input",I({type:s,className:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a},n))}));we.displayName="Input";var Se=d.cva("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ce=k.forwardRef((function(t,a){var r=t.className,s=t.variant,n=W(t,["className","variant"]);return e.jsx("div",I({ref:a,role:"alert",className:J(Se({variant:s}),r)},n))}));Ce.displayName="Alert",k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx("h5",I({ref:a,className:J("mb-1 font-medium leading-none tracking-tight",r)},s))})).displayName="AlertTitle";var ke=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx("div",I({ref:a,className:J("text-sm [&_p]:leading-relaxed",r)},s))}));ke.displayName="AlertDescription";var ze=function(e,t,a,r){var s=t.get?t.get("bounds"):null;if(s&&"object"==typeof s&&void 0!==s.right&&void 0!==s.left&&void 0!==s.bottom&&void 0!==s.top)e.set({left:s.left,top:s.top,selectable:!0});else{var n=t.left||t.x||0,i=t.top||t.y||0;0===n&&0===i&&a&&r?e.set({left:a/2,top:r/2,originX:"center",originY:"center",selectable:!0}):e.set({left:n,top:i,selectable:!0})}},Ae=function(e,t){return M(void 0,void 0,void 0,(function(){return B(this,(function(a){return[2,new Promise((function(a){try{var r=e.get("typeTool")||{},s="Text layer";e.text?s=e.text:r.textData&&r.textData.text&&(s=r.textData.text);var n={left:e.left||0,top:e.top||0,fontSize:20,fontFamily:"Arial",fill:"#000000"};r.style&&(r.style.fontSize&&(n.fontSize=r.style.fontSize),r.style.fontName&&(n.fontFamily=r.style.fontName),r.style.color&&(n.fill=r.style.color));var o=new i.fabric.Text(s,n);ze(o,e,0,0),t.add(o),a()}catch(e){console.error("Error processing text layer:",e),a()}}))]}))}))},Fe=function(e,t,a,r){return M(void 0,void 0,void 0,(function(){return B(this,(function(s){return[2,new Promise((function(s){try{console.log("Adding pixel data layer for node:",e.name||"Unnamed Layer");var n=document.createElement("canvas"),o=n.getContext("2d");if(o){var l=e.width(),c=e.height();if(l<=0||c<=0)return console.log("Layer has zero or negative dimensions, skipping"),void s();n.width=l,n.height=c;try{if(e.image&&e.image.pixelData&&e.image.pixelData.length>0){var d=new ImageData(new Uint8ClampedArray(e.image.pixelData),l,c);o.putImageData(d,0,0);var u=n.toDataURL("image/png");i.fabric.Image.fromURL(u,(function(n){if(!n)return console.error("Failed to create fabric image from pixel data layer"),void s();ze(n,e,a,r),e.name&&n.set("name",e.name),t.add(n),s()}),{crossOrigin:"anonymous"})}else console.log("No pixel data available for this layer, skipping"),s()}catch(e){console.error("Error creating ImageData:",e),s()}}else s()}catch(e){console.error("Error processing pixel data layer:",e),s()}}))]}))}))},Te=function(e,t,a,r,s){return M(void 0,void 0,void 0,(function(){var e,n,o;return B(this,(function(l){switch(l.label){case 0:e=0,n=[];try{n=t.descendants()||[],console.log("Found ".concat(n.length," descendants")),n.reverse()}catch(e){return console.error("Error getting descendants:",e),[2,{layersAdded:0}]}return o=n.map((function(t,n){return M(void 0,void 0,void 0,(function(){var o,l,c,d,u;return B(this,(function(m){switch(m.label){case 0:if(!t)return[2];if(console.log("Processing layer ".concat(n,":"),t.name||"Unnamed Layer"),"function"==typeof t.isGroup&&t.isGroup())return console.log("This is a group, skipping direct processing"),[2];if(!1===t.visible)return console.log("Layer is invisible, skipping"),[2];m.label=1;case 1:return m.trys.push([1,23,,24]),t.get&&(t.get("typeTool")||t.text)?(console.log("Processing text layer"),[4,Ae(t,a)]):[3,3];case 2:return m.sent(),e++,[2];case 3:if(!t.toPng)return[3,19];m.label=4;case 4:return m.trys.push([4,13,,18]),console.log("Processing layer with toPng()"),(o=t.toPng())?(l="",o instanceof HTMLCanvasElement?(l=o.toDataURL("image/png"),[3,8]):[3,5]):[3,10];case 5:return"object"==typeof o&&o.toDataURL?(l=o.toDataURL("image/png"),[3,8]):[3,6];case 6:return console.log("Unrecognized toPng() result, falling back to pixel data"),[4,Fe(t,a,r,s)];case 7:return m.sent(),e++,[2];case 8:return[4,new Promise((function(n){i.fabric.Image.fromURL(l,(function(i){if(!i)return console.error("Failed to create fabric image from layer"),void n();ze(i,t,r,s),t.name&&i.set("name",t.name),a.add(i),e++,n()}),{crossOrigin:"anonymous"})}))];case 9:return m.sent(),[3,12];case 10:return console.log("toPng() returned nothing, falling back to pixel data"),[4,Fe(t,a,r,s)];case 11:m.sent(),e++,m.label=12;case 12:return[3,18];case 13:c=m.sent(),console.error("Error processing layer with toPng:",c),m.label=14;case 14:return m.trys.push([14,16,,17]),console.log("toPng() failed, falling back to pixel data"),[4,Fe(t,a,r,s)];case 15:return m.sent(),e++,[3,17];case 16:return d=m.sent(),console.error("Fallback pixel data layer also failed:",d),[3,17];case 17:return[3,18];case 18:return[3,22];case 19:return t.image&&t.image.pixelData?(console.log("Processing layer with pixel data"),[4,Fe(t,a,r,s)]):[3,21];case 20:return m.sent(),e++,[3,22];case 21:console.log("Layer has no usable image data, skipping"),m.label=22;case 22:return[3,24];case 23:return u=m.sent(),console.error("Error processing layer:",u),[3,24];case 24:return[2]}}))}))})),[4,Promise.all(o.filter(Boolean))];case 1:return l.sent(),console.log("Added ".concat(e," layers to canvas")),[2,{layersAdded:e}]}}))}))},Pe=function(e,t,a,r){return M(void 0,void 0,void 0,(function(){return B(this,(function(s){return[2,new Promise((function(s){try{var n=e.image.toPng();if(n){var o=void 0;if(n instanceof HTMLCanvasElement)o=n.toDataURL("image/png");else if("object"==typeof n&&n.toDataURL)o=n.toDataURL("image/png");else{var l=document.createElement("canvas");l.width=a,l.height=r;var c=l.getContext("2d");if(!c||!e.image.pixelData)return void s({success:!1});var d=new ImageData(new Uint8ClampedArray(e.image.pixelData),a,r);c.putImageData(d,0,0),o=l.toDataURL("image/png")}i.fabric.Image.fromURL(o,(function(e){e?(e.scaleToWidth(a),t.add(e),t.renderAll(),console.log("Loaded composite image successfully"),s({success:!0})):s({success:!1})}),{crossOrigin:"anonymous"})}else s({success:!1})}catch(e){console.error("Error loading composite image:",e),s({success:!1})}}))]}))}))},Oe=function(e,t,a,r){return M(void 0,void 0,void 0,(function(){return B(this,(function(s){return[2,new Promise((function(s){try{var n=e.image.pixelData;if(n&&a&&r){var o=document.createElement("canvas");o.width=a,o.height=r;var l=o.getContext("2d");if(l){var c=new ImageData(new Uint8ClampedArray(n),a,r);l.putImageData(c,0,0);var d=o.toDataURL("image/png");i.fabric.Image.fromURL(d,(function(e){e?(e.scaleToWidth(a),t.add(e),t.renderAll(),console.log("Loaded flattened image successfully"),s({success:!0})):s({success:!1})}),{crossOrigin:"anonymous"})}else s({success:!1})}else s({success:!1})}catch(e){console.error("Error loading flattened image:",e),s({success:!1})}}))]}))}))},Re=function(e){return M(void 0,void 0,void 0,(function(){var t,a,r,s;return B(this,(function(n){try{return t="user-template-".concat(Date.now()),a=e.thumbnailUrl,localStorage.setItem("template-json-".concat(t),e.canvasJson),r={id:t,name:e.name,thumbnailPath:a,jsonPath:"template-json-".concat(t),category:e.category,size:e.size},(s=Ee()).push(r),Le(s),[2,!0]}catch(e){return console.error("Error saving template to folder:",e),[2,!1]}return[2]}))}))},Ee=function(){var e=localStorage.getItem("userUploadedTemplates");if(!e)return[];try{return JSON.parse(e)}catch(e){return console.error("Error parsing user uploaded templates:",e),[]}},Le=function(e){localStorage.setItem("userUploadedTemplates",JSON.stringify(e))},Ue=function(){var e=re(),a=e.canvas,r=e.setCanvasSize,s=e.saveToHistory,n=t.useState([]),o=n[0],c=n[1],d=t.useState([]);d[0],d[1];var u=t.useState(!1);u[0],u[1];var m=t.useState(1);m[0],m[1];var f=t.useState("nature");f[0],f[1],t.useEffect((function(){var e=localStorage.getItem("userTemplates");if(e)try{c(JSON.parse(e))}catch(e){console.error("Error loading user templates:",e),localStorage.removeItem("userTemplates")}}),[]),t.useEffect((function(){o.length>0&&localStorage.setItem("userTemplates",JSON.stringify(o))}),[o]);var h=t.useCallback((function(){return[{id:"psd-template-1",name:"Business Card Template",thumbnailUrl:"/psd-templates/business-card-thumb.jpg",demoUrl:"/psd-templates/business-card-demo.jpg",size:{width:1050,height:600},category:"cards"},{id:"psd-template-2",name:"Social Media Post",thumbnailUrl:"/psd-templates/social-post-thumb.jpg",demoUrl:"/psd-templates/social-post-demo.jpg",size:{width:1080,height:1080},category:"social"},{id:"psd-template-3",name:"Website Banner",thumbnailUrl:"/psd-templates/banner-thumb.jpg",demoUrl:"/psd-templates/banner-demo.jpg",size:{width:1200,height:300},category:"banners"},{id:"psd-template-4",name:"Company Logo",thumbnailUrl:"/psd-templates/logo-thumb.jpg",demoUrl:"/psd-templates/logo-demo.jpg",size:{width:500,height:500},category:"logos"},{id:"psd-template-5",name:"Email Newsletter",thumbnailUrl:"/psd-templates/email-thumb.jpg",demoUrl:"/psd-templates/email-demo.jpg",size:{width:600,height:800},category:"emails"}]}),[]),p=t.useCallback((function(){return o}),[o]),g=t.useCallback((function(e,t,r){if(!a)return l.toast.error("Canvas not initialized"),!1;try{var s=r||a.toDataURL({format:"jpeg",quality:.8,multiplier:.5}),n={id:"user-template-".concat(Date.now()),name:e,category:t,thumbnailUrl:s,size:{width:a.width||0,height:a.height||0},canvasJson:JSON.stringify(a.toJSON(["id","name"])),dateCreated:(new Date).toISOString()};return c((function(e){return q(q([],e,!0),[n],!1)})),l.toast.success('Template "'.concat(e,'" saved successfully')),!0}catch(e){return console.error("Error saving template:",e),l.toast.error("Failed to save template: ".concat(e instanceof Error?e.message:"Unknown error")),!1}}),[a]),x=t.useCallback((function(e){c((function(t){return t.filter((function(t){return t.id!==e}))})),l.toast.success("Template deleted successfully")}),[]),v=t.useCallback((function(e){if(a){r(e.size),a.clear();try{i.fabric.Image.fromURL(e.demoUrl,(function(t){if(!t)return console.error("Failed to load image from ".concat(e.demoUrl)),void l.toast.error("Failed to load template image. Please try another template.");var r=Math.min(e.size.width/(t.width||1),e.size.height/(t.height||1));t.set({scaleX:r,scaleY:r,left:(e.size.width-(t.width||0)*r)/2,top:(e.size.height-(t.height||0)*r)/2,selectable:!0}),a.add(t),a.renderAll(),s(a),l.toast.success('Template "'.concat(e.name,'" loaded successfully'))}),{crossOrigin:"anonymous"})}catch(e){console.error("Error loading template image:",e),l.toast.error("Failed to load template image: ".concat(e instanceof Error?e.message:"Unknown error"))}}else l.toast.error("Canvas not initialized")}),[a,r,s]),b=t.useCallback((function(e){if(a){r(e.size),a.clear();try{i.fabric.Image.fromURL(e.demoUrl,(function(t){if(!t)return console.error("Failed to load image from ".concat(e.demoUrl)),void l.toast.error("Failed to load template image. Please try another template.");var r=Math.min(e.size.width/(t.width||1),e.size.height/(t.height||1));t.set({scaleX:r,scaleY:r,left:(e.size.width-(t.width||0)*r)/2,top:(e.size.height-(t.height||0)*r)/2,selectable:!0,hasControls:!0,hasBorders:!0}),a.add(t),a.renderAll(),s(a),e.photographer?l.toast.success("Photo by ".concat(e.photographer," on Pexels")):l.toast.success('Template "'.concat(e.name,'" loaded successfully'))}),{crossOrigin:"anonymous"})}catch(e){console.error("Error loading Pexels template:",e),l.toast.error("Failed to load template: ".concat(e instanceof Error?e.message:"Unknown error"))}}else l.toast.error("Canvas not initialized")}),[a,r,s]),y=t.useCallback((function(e){return M(void 0,void 0,void 0,(function(){var t,n;return B(this,(function(o){switch(o.label){case 0:if(!a)return l.toast.error("Canvas not initialized"),[2];r(e.size),a.clear(),o.label=1;case 1:return o.trys.push([1,4,,5]),e.jsonPath?[4,(c=e.jsonPath,M(void 0,void 0,void 0,(function(){var e,t,a,r;return B(this,(function(s){switch(s.label){case 0:if(!c)return[2,null];s.label=1;case 1:if(s.trys.push([1,4,,5]),c.startsWith("template-json-")){if(!(e=localStorage.getItem(c)))throw new Error("Template JSON not found in localStorage: ".concat(c));return[2,e]}return[4,fetch(c)];case 2:if(!(t=s.sent()).ok)throw new Error("Failed to load template JSON: ".concat(t.statusText));return[4,t.json()];case 3:return a=s.sent(),[2,JSON.stringify(a)];case 4:return r=s.sent(),console.error("Error loading template JSON:",r),[2,null];case 5:return[2]}}))})))]:[3,3];case 2:if(t=o.sent())return a.loadFromJSON(t,(function(){a.renderAll(),s(a),l.toast.success('Template "'.concat(e.name,'" loaded successfully'))})),[2];o.label=3;case 3:return i.fabric.Image.fromURL(e.demoUrl||e.thumbnailUrl,(function(t){if(!t)return console.error("Failed to load image from ".concat(e.thumbnailUrl)),void l.toast.error("Failed to load template image. Please try another template.");var r=Math.min(e.size.width/(t.width||1),e.size.height/(t.height||1));t.set({scaleX:r,scaleY:r,left:(e.size.width-(t.width||0)*r)/2,top:(e.size.height-(t.height||0)*r)/2,selectable:!0}),a.add(t),a.renderAll(),s(a),l.toast.success('Template "'.concat(e.name,'" loaded successfully'))}),{crossOrigin:"anonymous"}),[3,5];case 4:return n=o.sent(),console.error("Error loading template:",n),l.toast.error("Failed to load template: ".concat(n instanceof Error?n.message:"Unknown error")),[3,5];case 5:return[2]}var c}))}))}),[a,r,s]);return{getPsdTemplates:h,getUserTemplates:p,loadDemoTemplate:v,loadPexelsTemplate:b,loadUserTemplate:t.useCallback((function(e){if(a){r(e.size),a.clear();try{e.canvasJson?a.loadFromJSON(e.canvasJson,(function(){a.renderAll(),s(a),l.toast.success('Template "'.concat(e.name,'" loaded successfully'))})):i.fabric.Image.fromURL(e.thumbnailUrl,(function(t){if(!t)return console.error("Failed to load image from ".concat(e.thumbnailUrl)),void l.toast.error("Failed to load template image. Please try another template.");var r=Math.min(e.size.width/(t.width||1),e.size.height/(t.height||1));t.set({scaleX:r,scaleY:r,left:(e.size.width-(t.width||0)*r)/2,top:(e.size.height-(t.height||0)*r)/2,selectable:!0}),a.add(t),a.renderAll(),s(a),l.toast.success('Template "'.concat(e.name,'" loaded successfully'))}),{crossOrigin:"anonymous"})}catch(e){console.error("Error loading user template:",e),l.toast.error("Failed to load template: ".concat(e instanceof Error?e.message:"Unknown error"))}}else l.toast.error("Canvas not initialized")}),[a,r,s]),saveAsTemplate:g,deleteUserTemplate:x,loadTemplateFromFolder:y}},De=function(){var e=function(){var e=re(),a=e.canvas,r=e.setCanvasSize,s=e.saveToHistory,n=t.useCallback((function(e){return M(void 0,void 0,void 0,(function(){var t,n,i,o,c,d,u,m,f,p,g,x,v,b,y;return B(this,(function(j){switch(j.label){case 0:if(!a)return l.toast.error("Canvas not initialized"),[2,!1];j.label=1;case 1:return j.trys.push([1,20,,21]),t=l.toast.loading("Processing PSD file...",{duration:6e4}),[4,e.arrayBuffer()];case 2:if(!(n=j.sent())||0===n.byteLength)return l.toast.dismiss(t),l.toast.error("Invalid PSD file: Empty file"),[2,!1];console.log("PSD file size: ".concat((n.byteLength/1024/1024).toFixed(2)," MB")),j.label=3;case 3:return j.trys.push([3,18,,19]),[4,(i=new h(new Uint8Array(n))).parse()];case 4:if(j.sent(),o=i.header.width,c=i.header.height,console.log("PSD dimensions: ".concat(o,"x").concat(c)),!o||!c||o<=0||c<=0)return l.toast.dismiss(t),l.toast.error("Invalid PSD dimensions"),[2,!1];r({width:o,height:c}),a.clear(),console.log("PSD loaded, processing layers..."),d=!1,u=void 0,j.label=5;case 5:return j.trys.push([5,8,,9]),[4,(u=i.tree()).export()];case 6:return j.sent(),console.log("PSD tree structure:",u),[4,Te(0,u,a,o,c)];case 7:return(m=j.sent()).layersAdded>0?(console.log("Successfully added ".concat(m.layersAdded," layers to canvas")),d=!0,a.renderAll()):console.log("No layers were added, falling back to composite image"),[3,9];case 8:return f=j.sent(),console.error("Error processing layer tree:",f),[3,9];case 9:if(d)return[3,13];j.label=10;case 10:return j.trys.push([10,12,,13]),[4,Pe(i,a,o,c)];case 11:return p=j.sent(),d=p.success,[3,13];case 12:return g=j.sent(),console.error("Error getting composite image:",g),[3,13];case 13:if(d)return[3,17];j.label=14;case 14:return j.trys.push([14,16,,17]),[4,Oe(i,a,o,c)];case 15:return x=j.sent(),d=x.success,[3,17];case 16:return v=j.sent(),console.error("Error creating flattened image:",v),[3,17];case 17:return d?(a.renderAll(),s(a),l.toast.dismiss(t),l.toast.success("PSD template loaded successfully"),[2,!0]):(l.toast.dismiss(t),l.toast.error("Could not extract any content from the PSD file"),[2,!1]);case 18:return b=j.sent(),console.error("Error parsing PSD file:",b),l.toast.dismiss(t),l.toast.error("Failed to parse PSD: ".concat(b.message||"Unknown parsing error")),[2,!1];case 19:return[3,21];case 20:return y=j.sent(),console.error("Error loading PSD file:",y),l.toast.error("Failed to load PSD: ".concat(y.message||"Unknown error")),[2,!1];case 21:return[2]}}))}))}),[a,r,s]);return{loadPsdTemplate:n}}().loadPsdTemplate,a=Ue(),r=a.getUserTemplates,s=a.loadDemoTemplate,n=a.loadUserTemplate,i=a.saveAsTemplate,o=a.deleteUserTemplate,c=a.loadTemplateFromFolder,d=re().canvas,u=t.useCallback((function(){return M(void 0,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,M(void 0,void 0,void 0,(function(){var e,t;return B(this,(function(a){try{return e=[{id:"template-1",name:"Business Card",thumbnailPath:"/lovable-uploads/b334919b-439f-4f5f-87cc-7e184bfe32fa.png",jsonPath:"/templates/template-1.json",category:"cards",size:{width:1050,height:600}},{id:"template-2",name:"Sify Datacenter",thumbnailPath:"/lovable-uploads/bb5ca99e-c258-43b3-a7f4-bd7275e9800b.png",jsonPath:"/templates/template-2.json",category:"banners",size:{width:1200,height:300}},{id:"template-3",name:"Booking Website",thumbnailPath:"/lovable-uploads/1b004328-4b62-42cf-824f-eb28ba216b41.png",jsonPath:"/templates/template-3.json",category:"banners",size:{width:1200,height:300}},{id:"template-4",name:"Building Architecture",thumbnailPath:"/lovable-uploads/aad5799a-e123-4317-84ab-a244c43db70f.png",jsonPath:"/templates/template-4.json",category:"cards",size:{width:1050,height:600}},{id:"template-5",name:"Fitness Poster",thumbnailPath:"/lovable-uploads/b8574978-0893-4eb8-a139-41dc75c6f9be.png",jsonPath:"/templates/template-5.json",category:"social",size:{width:1080,height:1920}},{id:"template-6",name:"Template C",thumbnailPath:"/lovable-uploads/c86ad02e-540f-459f-8f26-30c296964f27.png",jsonPath:"/templates/template-6.json",category:"websites",size:{width:1200,height:900}},{id:"template-7",name:"Dark Pattern",thumbnailPath:"/lovable-uploads/dc67de50-725f-4c0f-b351-4c306d933e82.png",jsonPath:"/templates/template-7.json",category:"backgrounds",size:{width:1080,height:1080}}],t=Ee(),[2,q(q([],e,!0),t,!0).map((function(e){return{id:e.id,name:e.name,thumbnailUrl:e.thumbnailPath,demoUrl:e.thumbnailPath,size:e.size,category:e.category,jsonPath:e.jsonPath}}))]}catch(e){return console.error("Error fetching templates:",e),[2,[]]}return[2]}))}))];case 1:return[2,e.sent().filter((function(e){return"psd-uploads"===e.category}))]}}))}))}),[]),m=t.useCallback((function(t){return M(void 0,void 0,void 0,(function(){var a,r,s,n,i;return B(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,e(t)];case 1:return o.sent()&&d?(a=d.toDataURL({format:"jpeg",quality:.7,multiplier:.5}),r=JSON.stringify(d.toJSON(["id","name"])),s=t.name.replace(/\.[^/.]+$/,""),n={name:s,thumbnailUrl:a,canvasJson:r,size:{width:d.width||800,height:d.height||600},category:"psd-uploads"},console.log("Saving PSD template:",n),[4,Re(n)]):(l.toast.error("Failed to load PSD file for template creation"),[2,!1]);case 2:return o.sent()?(l.toast.success('Template "'.concat(s,'" saved successfully to template folder')),[2,!0]):(l.toast.error("Failed to save template to folder"),[2,!1]);case 3:return i=o.sent(),console.error("Error uploading PSD as template:",i),l.toast.error("Error creating template: ".concat(i instanceof Error?i.message:"Unknown error")),[2,!1];case 4:return[2]}}))}))}),[e,d]);return{loadPsdTemplate:e,getPsdTemplates:u,getUserTemplates:r,loadDemoTemplate:s,loadUserTemplate:n,saveAsTemplate:i,deleteUserTemplate:o,loadTemplateFromFolder:c,uploadPsdAsTemplate:m}},Ie=function(a){var r=a.acceptedTypes,s=void 0===r?".psd,.png,.jpg,.jpeg,.svg,.fig":r,n=a.maxSizeMB,o=void 0===n?100:n,c=a.onSuccess,d=a.saveAsTemplate,m=void 0!==d&&d,f=t.useState(!1),h=f[0],p=f[1],g=De(),x=g.loadPsdTemplate,v=g.uploadPsdAsTemplate,b=re(),y=b.canvas,j=b.setCanvasSize,N=b.saveToHistory;b.exportToImage;return e.jsx("div",{children:e.jsxs("label",{htmlFor:"file-upload",children:[e.jsxs("div",{className:"border-2 border-dashed border-border rounded-md p-4 text-center cursor-pointer hover:border-primary transition-colors",children:[h?e.jsx(u.Loader2,{className:"h-10 w-10 mx-auto mb-2 text-muted-foreground animate-spin"}):e.jsx(e.Fragment,{children:m?e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(u.Upload,{className:"h-8 w-8 text-muted-foreground"}),e.jsx(u.Save,{className:"h-6 w-6 text-muted-foreground ml-1"})]}):e.jsx(u.Upload,{className:"h-10 w-10 mx-auto mb-2 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium",children:m?"Upload as Template":"Upload File"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m?"Add PSD or images directly to your templates library":"Import PSD (up to ".concat(o,"MB), images, or exported Figma designs")}),h&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-1 w-full bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary animate-pulse rounded-full"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Processing file... This may take a moment"})]})]}),e.jsx("input",{id:"file-upload",type:"file",accept:s,className:"hidden",onChange:function(e){return M(void 0,void 0,void 0,(function(){var t,a,r,s,n,d;return B(this,(function(u){switch(u.label){case 0:if(!(t=null===(d=e.target.files)||void 0===d?void 0:d[0]))return[2];if((a=t.size/1048576)>o)return l.toast.error("File is too large. Maximum size is ".concat(o,"MB.")),[2];p(!0),u.label=1;case 1:return u.trys.push([1,8,9,10]),f=t.name,r=f.slice(2+(f.lastIndexOf(".")-1>>>0)).toLowerCase(),console.log("Processing ".concat(r," file:"),t.name,"size:",a.toFixed(2),"MB"),"psd"!==r?[3,6]:m?[4,v(t)]:[3,3];case 2:return u.sent(),[3,5];case 3:return[4,x(t)];case 4:u.sent(),u.label=5;case 5:return[3,7];case 6:if(["png","jpg","jpeg","svg"].includes(r)){if(!y)return l.toast.error("Canvas not initialized"),[2];(s=new FileReader).onload=function(e){return M(void 0,void 0,void 0,(function(){var a,r;return B(this,(function(s){return a=null===(r=e.target)||void 0===r?void 0:r.result,i.fabric.Image.fromURL(a,(function(e){return M(void 0,void 0,void 0,(function(){var a,r,s,n,i,o,c,d,u;return B(this,(function(f){switch(f.label){case 0:return e?(a=y.width||800,r=y.height||600,s=e.width||0,n=e.height||0,(s>a||n>r)&&j({width:Math.max(a,s),height:Math.max(r,n)}),(i=Math.min(a/(s||1),r/(n||1)))<1&&e.scale(i),e.set({left:(a-s*(i<1?i:1))/2,top:(r-n*(i<1?i:1))/2,selectable:!0}),m&&y.clear(),y.add(e),y.renderAll(),N(y),m?(o=t.name.replace(/\.[^/.]+$/,""),c=y.toDataURL({format:"jpeg",quality:.7,multiplier:.5}),d=JSON.stringify(y.toJSON(["id","name"])),u={name:o,thumbnailUrl:c,canvasJson:d,size:{width:y.width||800,height:y.height||600},category:"image-uploads"},[4,Re(u)]):[3,2]):(console.error("Failed to load image"),l.toast.error("Failed to load image file. Please try another file."),[2]);case 1:return f.sent()?l.toast.success('Image "'.concat(o,'" saved successfully as template')):l.toast.error("Failed to save image as template"),[3,3];case 2:l.toast.success("Image loaded successfully"),f.label=3;case 3:return[2]}}))}))})),[2]}))}))},s.readAsDataURL(t)}else"fig"===r?l.toast.info("Figma files cannot be directly imported. Please export your Figma design as PNG or JPG first."):l.toast.error("Unsupported file type: ".concat(r));u.label=7;case 7:return c&&c(),[3,10];case 8:return n=u.sent(),console.error("Error uploading file:",n),l.toast.error("Failed to process file: ".concat(n.message||"Unknown error")),[3,10];case 9:return p(!1),e.target.value="",[7];case 10:return[2]}var f}))}))},disabled:h})]})})},We=function(a){var r=a.onImageSelect,s=t.useState([]),n=s[0],i=s[1],o=t.useState(""),l=o[0],c=o[1],d=t.useState(!1),m=d[0],f=d[1],h=t.useState(1),p=h[0],g=h[1],x=t.useState(!0),v=x[0],b=x[1],y=t.useState(null),j=y[0],N=y[1];t.useEffect((function(){w(!1)}),[]);var w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M(void 0,q([],e,!0),void 0,(function(e){var t,a,r,s,n,o,c;return void 0===e&&(e=!1),B(this,(function(d){switch(d.label){case 0:f(!0),N(null),d.label=1;case 1:return d.trys.push([1,4,5,6]),t=e?1:p+1,a=void 0,a=l&&e?"https://api.unsplash.com/search/photos?query=".concat(encodeURIComponent(l),"&page=").concat(t,"&per_page=").concat(6):"https://api.unsplash.com/photos?page=".concat(t,"&per_page=").concat(6),[4,fetch(a,{headers:{Authorization:"Client-ID ".concat("55vVhZ-tFehN51yXwGIoDveBQRovUM50ZZptfPhdtRU")}})];case 2:if(!(r=d.sent()).ok)throw new Error("Unsplash API error: ".concat(r.status));return[4,r.json()];case 3:return s=d.sent(),n=l&&e?s.results.map((function(e){return{id:e.id,url:e.urls.regular,thumb:e.urls.thumb,description:e.alt_description||e.description||"Unsplash image",user:{name:e.user.name,username:e.user.username}}})):s.map((function(e){return{id:e.id,url:e.urls.regular,thumb:e.urls.thumb,description:e.alt_description||e.description||"Unsplash image",user:{name:e.user.name,username:e.user.username}}})),e?(i(n),g(1)):(i((function(e){return q(q([],e,!0),n,!0)})),g(t)),o=l?s.total_pages:100,b(t<o),[3,6];case 4:return c=d.sent(),console.error("Error fetching images:",c),N("Failed to fetch images from Unsplash."),[3,6];case 5:return f(!1),[7];case 6:return[2]}}))}))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("form",{onSubmit:function(e){e.preventDefault(),l.trim()&&w(!0)},className:"flex gap-2",children:[e.jsx(we,{type:"text",placeholder:"Search images...",value:l,onChange:function(e){return c(e.target.value)},className:"flex-1"}),e.jsx(ie,{type:"submit",size:"sm",disabled:m,children:m&&l?e.jsx(u.Loader2,{className:"h-4 w-4 animate-spin"}):e.jsx(u.Search,{className:"h-4 w-4"})})]}),j&&e.jsxs(Ce,{variant:"destructive",children:[e.jsx(u.AlertCircle,{className:"h-4 w-4"}),e.jsx(ke,{children:j})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map((function(t){return e.jsxs("div",{className:"aspect-square rounded-md overflow-hidden cursor-pointer hover:opacity-90 transition-opacity relative group",onClick:function(){return function(e){r(e.url)}(t)},children:[e.jsx("img",{src:t.thumb,alt:t.description,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:e.jsx(u.Plus,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-1 bg-black bg-opacity-50 text-white text-xs truncate opacity-0 group-hover:opacity-100 transition-opacity",children:["Photo by ",t.user.name]})]},t.id)}))}),m&&0===n.length&&e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(u.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),!m&&0===n.length&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No images found. Try a different search term."})}),n.length>0&&v&&e.jsx(ie,{variant:"outline",className:"w-full flex items-center justify-center gap-2",onClick:function(){w(!1)},disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(u.Loader2,{className:"h-4 w-4 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u.RefreshCw,{className:"h-4 w-4"}),"Load More"]})}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground pt-2 pb-4",children:["Photos provided by ",e.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Unsplash"})]}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx(Ie,{})})]})},Me=function(a){var r=a.addShape,s=t.useState(""),n=s[0],i=s[1],o=t.useState("basic"),l=o[0],c=o[1],d={basic:[{id:"rectangle",name:"Rectangle",icon:e.jsx(u.Square,{className:"h-10 w-10"}),addFn:function(){return r("rect")}},{id:"circle",name:"Circle",icon:e.jsx(u.CircleIcon,{className:"h-10 w-10"}),addFn:function(){return r("circle")}},{id:"triangle",name:"Triangle",icon:e.jsx(u.Triangle,{className:"h-10 w-10"}),addFn:function(){return r("triangle")}},{id:"diamond",name:"Diamond",icon:e.jsx("div",{className:"h-10 w-10 border-2 border-foreground rotate-45"}),addFn:function(){return r("diamond")}},{id:"ellipse",name:"Ellipse",icon:e.jsx("div",{className:"h-8 w-10 border-2 border-foreground rounded-full"}),addFn:function(){return r("ellipse")}},{id:"square",name:"Square",icon:e.jsx("div",{className:"h-9 w-9 border-2 border-foreground"}),addFn:function(){return r("square")}}],geometric:[{id:"pentagon",name:"Pentagon",icon:e.jsx(u.Pentagon,{className:"h-10 w-10"}),addFn:function(){return r("pentagon")}},{id:"hexagon",name:"Hexagon",icon:e.jsx(u.Hexagon,{className:"h-10 w-10"}),addFn:function(){return r("hexagon")}},{id:"octagon",name:"Octagon",icon:e.jsx(u.Octagon,{className:"h-10 w-10"}),addFn:function(){return r("octagon")}},{id:"star",name:"Star",icon:e.jsx(u.Star,{className:"h-10 w-10"}),addFn:function(){return r("star")}},{id:"heart",name:"Heart",icon:e.jsx(u.Heart,{className:"h-10 w-10"}),addFn:function(){return r("heart")}},{id:"grid",name:"Grid",icon:e.jsx(u.Grid3X3,{className:"h-10 w-10"}),addFn:function(){return r("grid")}}],arrows:[{id:"arrow-right",name:"Right Arrow",icon:e.jsx(u.ArrowRight,{className:"h-10 w-10"}),addFn:function(){return r("arrow",{direction:"right"})}},{id:"arrow-left",name:"Left Arrow",icon:e.jsx(u.ArrowLeft,{className:"h-10 w-10"}),addFn:function(){return r("arrow",{direction:"left"})}},{id:"arrow-up",name:"Up Arrow",icon:e.jsx(u.ArrowUp,{className:"h-10 w-10"}),addFn:function(){return r("arrow",{direction:"up"})}},{id:"arrow-down",name:"Down Arrow",icon:e.jsx(u.ArrowDown,{className:"h-10 w-10"}),addFn:function(){return r("arrow",{direction:"down"})}},{id:"double-arrow",name:"Double Arrow",icon:e.jsx(u.MoreHorizontal,{className:"h-10 w-10"}),addFn:function(){return r("arrow",{type:"double"})}}],callouts:[{id:"message-square",name:"Square Callout",icon:e.jsx(u.MessageSquare,{className:"h-10 w-10"}),addFn:function(){return r("callout",{type:"square"})}},{id:"message-circle",name:"Round Callout",icon:e.jsx(u.MessageCircle,{className:"h-10 w-10"}),addFn:function(){return r("callout",{type:"circle"})}}],special:[{id:"plus",name:"Plus",icon:e.jsx(u.PlusSquare,{className:"h-10 w-10"}),addFn:function(){return r("plus")}},{id:"award",name:"Badge",icon:e.jsx(u.Award,{className:"h-10 w-10"}),addFn:function(){return r("badge")}}]},m=function(){if(!n.trim())return d[l]||[];var e=n.toLowerCase(),t=[];return Object.values(d).forEach((function(a){a.forEach((function(a){a.name.toLowerCase().includes(e)&&t.push(a)}))})),t}();return e.jsxs("div",{className:"space-y-4",children:[e.jsx(we,{type:"text",placeholder:"Search shapes...",value:n,onChange:function(e){return i(e.target.value)},className:"w-full"}),!n&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"basic",name:"Basic"},{id:"geometric",name:"Geometric"},{id:"arrows",name:"Arrows"},{id:"callouts",name:"Callouts"},{id:"special",name:"Special"}].map((function(t){return e.jsx(ie,{size:"sm",variant:l===t.id?"default":"outline",onClick:function(){return c(t.id)},className:"text-xs",children:t.name},t.id)}))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.map((function(t){return e.jsxs("div",{className:"aspect-square border border-border rounded-md p-2 flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-accent transition-colors",onClick:t.addFn,children:[t.icon,e.jsx("span",{className:"text-xs mt-2 text-muted-foreground",children:t.name})]},t.id)})),0===m.length&&e.jsx("div",{className:"col-span-3 py-8 text-center text-muted-foreground",children:e.jsx("p",{children:"No shapes found. Try a different search term."})})]})]})},Be=function(a){var r=a.collapsed,s=a.onToggle,n=t.useState("templates"),i=n[0],o=n[1],l=re(),c=l.addImage,d=l.addText,m=l.addRect,f=l.addCircle,h=l.addTriangle,p=l.setCanvasSize;l.canvas;var g=l.loadFromJSON,x=l.createBusinessCardTemplate,v=l.addShape,b=Ne().toast;Ue().loadPexelsTemplate;var y={logos:[{id:"logo-1",name:"Simple Logo",type:"Logo",size:{width:500,height:500},preview:"Circle with text"},{id:"logo-2",name:"Abstract Logo",type:"Logo",size:{width:500,height:500},preview:"Triangles and squares"},{id:"logo-3",name:"Text Logo",type:"Logo",size:{width:600,height:300},preview:"Stylized company name"}],banners:[{id:"banner-1",name:"Website Header",type:"Banner",size:{width:1200,height:300},preview:"Wide rectangular banner"},{id:"banner-2",name:"Social Media Cover",type:"Banner",size:{width:820,height:312},preview:"Social cover photo"},{id:"banner-3",name:"Ad Banner",type:"Banner",size:{width:728,height:90},preview:"Thin rectangular ad"}],cards:[{id:"card-1",name:"Business Card",type:"Card",size:{width:1050,height:600},preview:"Standard business card",action:x},{id:"card-2",name:"Greeting Card",type:"Card",size:{width:1050,height:750},preview:"Foldable greeting card"},{id:"card-3",name:"Product Card",type:"Card",size:{width:600,height:800},preview:"Product display card"}],emails:[{id:"email-1",name:"Newsletter",type:"Email",size:{width:600,height:900},preview:"Newsletter template"},{id:"email-2",name:"Promotional Email",type:"Email",size:{width:600,height:800},preview:"Sales promotion email"},{id:"email-3",name:"Welcome Email",type:"Email",size:{width:600,height:700},preview:"New user welcome"}],social:[{id:"social-1",name:"Instagram Post",type:"Social",size:{width:1080,height:1080},preview:"Square image for feed"},{id:"social-2",name:"Twitter Post",type:"Social",size:{width:1200,height:675},preview:"Twitter image post"},{id:"social-3",name:"Story Format",type:"Social",size:{width:1080,height:1920},preview:"Vertical story format"}]},j=function(t){var a=t.template,r=t.icon;return e.jsxs("div",{className:"border border-border/40 rounded-lg p-4 cursor-pointer hover:border-primary/70 hover:bg-accent/50 transition-all duration-300 shadow-sm hover:shadow-md",onClick:function(){return function(e){p(e.size),e.json?setTimeout((function(){g(e.json),b({title:"Template loaded",description:"".concat(e.name," template loaded successfully")})}),100):e.action&&setTimeout((function(){e.action(),b({title:"Template loaded",description:"".concat(e.name," template loaded successfully")})}),100)}(a)},children:[e.jsxs("div",{className:"bg-muted/60 rounded-md h-28 mb-3 flex items-center justify-center text-muted-foreground group-hover:bg-muted/80 transition-colors overflow-hidden relative",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 z-10",children:[r,e.jsxs("span",{className:"text-xs font-medium",children:[a.size.width," x ",a.size.height]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent to-background/10 opacity-70"})]}),e.jsx("div",{className:"text-sm font-medium mb-1",children:a.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.type})]},a.id)},N=t.useState("cards"),w=N[0],S=N[1];t.useState(["nature","abstract","business","people","travel","animals","food","architecture"])[0];return e.jsxs("div",{className:J("editor-sidebar panel-transition backdrop-blur-sm bg-sidebar/95 border-r border-border/50 shadow-sm",r?"collapsed w-0":"w-[290px]"),children:[e.jsxs("div",{className:"p-4 border-b border-border/30 bg-gradient-to-r from-sidebar-accent/80 to-sidebar/80 backdrop-blur-md flex justify-between items-center sticky top-0 z-10 shadow-sm",children:[e.jsx("h3",{className:"font-medium text-base bg-gradient-to-r from-sidebar-primary to-sidebar-primary/70 bg-clip-text text-transparent",children:"Design Elements"}),e.jsx(ie,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8 ml-auto text-sidebar-foreground hover:text-sidebar-primary hover:bg-sidebar-accent/50 transition-all duration-300",children:r?e.jsx(u.ChevronRight,{className:"h-4 w-4"}):e.jsx(u.ChevronLeft,{className:"h-4 w-4"})})]}),e.jsxs(le,{defaultValue:"templates",value:i,onValueChange:o,className:"w-full",children:[e.jsxs(ce,{className:"w-full grid grid-cols-4 p-2 bg-sidebar-accent/30 backdrop-blur-sm sticky top-[57px] z-10 border-b border-border/20",children:[e.jsxs(de,{value:"templates",className:"text-xs data-[state=active]:bg-sidebar-primary data-[state=active]:text-sidebar-primary-foreground",children:[e.jsx(u.SquareStack,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Templates"})]}),e.jsxs(de,{value:"images",className:"text-xs data-[state=active]:bg-sidebar-primary data-[state=active]:text-sidebar-primary-foreground",children:[e.jsx(u.Image,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Images"})]}),e.jsxs(de,{value:"shapes",className:"text-xs data-[state=active]:bg-sidebar-primary data-[state=active]:text-sidebar-primary-foreground",children:[e.jsx(u.Square,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Shapes"})]}),e.jsxs(de,{value:"text",className:"text-xs data-[state=active]:bg-sidebar-primary data-[state=active]:text-sidebar-primary-foreground",children:[e.jsx(u.Type,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Text"})]})]}),e.jsxs(me,{className:"h-[calc(100vh-10rem)]",children:[e.jsxs(ue,{value:"templates",className:"p-4 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs(ie,{size:"sm",variant:"logos"===w?"default":"outline",onClick:function(){return S("logos")},className:J("text-xs flex gap-1 items-center transition-all duration-300","logos"===w?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent"),children:[e.jsx(u.Star,{className:"h-3 w-3"}),"Logos"]}),e.jsxs(ie,{size:"sm",variant:"banners"===w?"default":"outline",onClick:function(){return S("banners")},className:J("text-xs flex gap-1 items-center transition-all duration-300","banners"===w?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent"),children:[e.jsx(u.Flag,{className:"h-3 w-3"}),"Banners"]}),e.jsxs(ie,{size:"sm",variant:"cards"===w?"default":"outline",onClick:function(){return S("cards")},className:J("text-xs flex gap-1 items-center transition-all duration-300","cards"===w?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent"),children:[e.jsx(u.CreditCard,{className:"h-3 w-3"}),"Cards"]}),e.jsxs(ie,{size:"sm",variant:"emails"===w?"default":"outline",onClick:function(){return S("emails")},className:J("text-xs flex gap-1 items-center transition-all duration-300","emails"===w?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent"),children:[e.jsx(u.Mail,{className:"h-3 w-3"}),"Emails"]}),e.jsxs(ie,{size:"sm",variant:"social"===w?"default":"outline",onClick:function(){return S("social")},className:J("text-xs flex gap-1 items-center transition-all duration-300","social"===w?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent"),children:[e.jsx(u.Image,{className:"h-3 w-3"}),"Social"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mt-6",children:y[w].map((function(t){var a;switch(w){case"logos":a=e.jsx(u.Star,{className:"h-8 w-8 text-sidebar-primary"});break;case"banners":a=e.jsx(u.Flag,{className:"h-8 w-8 text-sidebar-primary"});break;case"cards":a=e.jsx(u.CreditCard,{className:"h-8 w-8 text-sidebar-primary"});break;case"emails":a=e.jsx(u.Mail,{className:"h-8 w-8 text-sidebar-primary"});break;case"social":a=e.jsx(u.Image,{className:"h-8 w-8 text-sidebar-primary"});break;default:a=e.jsx(u.SquareStack,{className:"h-8 w-8 text-sidebar-primary"})}return e.jsx(j,{template:t,icon:a},t.id)}))})]}),e.jsx(ue,{value:"images",className:"p-4 animate-fade-in",children:e.jsx(We,{onImageSelect:function(e){c(e)}})}),e.jsx(ue,{value:"shapes",className:"p-4 animate-fade-in",children:e.jsx(Me,{addShape:function(e,t){switch(e){case"rect":m();break;case"circle":f();break;case"triangle":h();break;default:"function"==typeof v?v(e,t):(console.warn("addShape function not available in editor context"),"square"===e||"diamond"===e?m():"ellipse"===e?f():m())}}})}),e.jsxs(ue,{value:"text",className:"p-4 animate-fade-in",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[{id:"q1-action",primary:"Q1",secondary:"ACTION PLAN",style:{background:"#f0f0f0",primaryColor:"#6ab04c",secondaryColor:"#2c3e50",primarySize:28,secondarySize:24,primaryFont:"Arial, sans-serif",secondaryFont:"Arial, sans-serif",primaryWeight:"bold",secondaryWeight:"bold"}},{id:"quarter-roadmap",primary:"Quarter",secondary:"ROADMAP",style:{background:"#f0f0f0",primaryColor:"#3498db",secondaryColor:"#2c3e50",primarySize:24,secondarySize:18,primaryFont:"Georgia, serif",secondaryFont:"Arial, sans-serif",primaryWeight:"normal",secondaryWeight:"bold"}},{id:"new-opportunities",primary:"NEW",secondary:"OPPORTUNITIES",style:{background:"#f0f0f0",primaryColor:"#3498db",secondaryColor:"#2c3e50",primarySize:24,secondarySize:22,primaryFont:"Arial, sans-serif",secondaryFont:"Arial, sans-serif",primaryWeight:"bold",secondaryWeight:"normal",specialStyle:"italic"}},{id:"join-team",primary:"JOIN",secondary:"OUR\nTEAM",style:{background:"#f0f0f0",primaryColor:"#2c3e50",secondaryColor:"#2c3e50",primarySize:28,secondarySize:28,primaryFont:"Times New Roman, serif",secondaryFont:"Times New Roman, serif",primaryWeight:"bold",secondaryWeight:"bold",specialStyle:"stacked"}},{id:"lets-connect",primary:"LET'S",secondary:"connect",style:{background:"#f0f0f0",primaryColor:"#3498db",secondaryColor:"#3498db",primarySize:16,secondarySize:28,primaryFont:"Arial, sans-serif",secondaryFont:"Georgia, serif",primaryWeight:"normal",secondaryWeight:"bold",specialStyle:"script"}},{id:"register-now",primary:"Register",secondary:"NOW",style:{background:"#f0f0f0",primaryColor:"#2c3e50",secondaryColor:"#ffffff",primarySize:22,secondarySize:24,primaryFont:"Arial, sans-serif",secondaryFont:"Arial, sans-serif",primaryWeight:"normal",secondaryWeight:"bold",specialStyle:"button",buttonColor:"#4CAF50"}},{id:"happening-now",primary:"Happening",secondary:"NOW",style:{background:"#f0f0f0",primaryColor:"#2c3e50",secondaryColor:"#9b59b6",primarySize:18,secondarySize:32,primaryFont:"Georgia, serif",secondaryFont:"Arial, sans-serif",primaryWeight:"normal",secondaryWeight:"bold"}},{id:"tax-season",primary:"tax",secondary:"season",style:{background:"#f0f0f0",primaryColor:"#3498db",secondaryColor:"#2c3e50",primarySize:42,secondarySize:18,primaryFont:"Georgia, serif",secondaryFont:"Georgia, serif",primaryWeight:"bold",secondaryWeight:"normal",specialStyle:"italic"}}].map((function(t){return e.jsx("div",{className:"border border-border/40 rounded-lg cursor-pointer hover:border-primary/70 hover:shadow-md transition-all duration-300 overflow-hidden group",onClick:function(){return function(e){try{if("stacked"===e.style.specialStyle){var t=e.secondary.split("\n"),a="".concat(e.primary,"\n").concat(t.join("\n"));d(a,{fontSize:e.style.primarySize,fontFamily:e.style.primaryFont,fontWeight:e.style.primaryWeight,fill:e.style.primaryColor,textAlign:"center",lineHeight:1.2})}else"button"===e.style.specialStyle?(m({width:120,height:50,rx:25,ry:25,fill:e.style.buttonColor,left:150,top:150}),d(e.secondary,{fontSize:e.style.secondarySize,fontFamily:e.style.secondaryFont,fontWeight:e.style.secondaryWeight,fill:e.style.secondaryColor,left:150,top:150,textAlign:"center",originX:"center",originY:"center"}),e.primary&&d(e.primary,{fontSize:e.style.primarySize,fontFamily:e.style.primaryFont,fontWeight:e.style.primaryWeight,fill:e.style.primaryColor,left:150,top:110,textAlign:"center",originX:"center"})):(d(e.primary,{fontSize:e.style.primarySize,fontFamily:e.style.primaryFont,fontWeight:e.style.primaryWeight,fontStyle:"italic"===e.style.specialStyle?"italic":"normal",fill:e.style.primaryColor,left:100,top:100}),d(e.secondary,{fontSize:e.style.secondarySize,fontFamily:e.style.secondaryFont,fontWeight:e.style.secondaryWeight,fontStyle:"script"===e.style.specialStyle?"italic":"normal",fill:e.style.secondaryColor,left:100,top:100+e.style.primarySize+5}));b({title:"Text template added",description:"Text template added to canvas"})}catch(e){console.error("Error adding text template:",e),b({title:"Error",description:"Failed to add text template",variant:"destructive"})}}(t)},children:e.jsxs("div",{className:"flex flex-col justify-center items-center p-5 bg-muted/40 group-hover:bg-muted/70 transition-colors aspect-square relative",children:["stacked"===t.style.specialStyle?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{style:{color:t.style.primaryColor,fontSize:"".concat(.7*t.style.primarySize,"px"),fontFamily:t.style.primaryFont,fontWeight:t.style.primaryWeight},children:t.primary}),t.secondary.split("\n").map((function(a,r){return e.jsx("div",{style:{color:t.style.secondaryColor,fontSize:"".concat(.7*t.style.secondarySize,"px"),fontFamily:t.style.secondaryFont,fontWeight:t.style.secondaryWeight},children:a},r)}))]}):"button"===t.style.specialStyle?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{style:{color:t.style.primaryColor,fontSize:"".concat(.7*t.style.primarySize,"px"),fontFamily:t.style.primaryFont,fontWeight:t.style.primaryWeight,marginBottom:"5px"},children:t.primary}),e.jsx("div",{style:{backgroundColor:t.style.buttonColor,display:"inline-block",padding:"5px 15px",borderRadius:"20px"},children:e.jsx("div",{style:{color:t.style.secondaryColor,fontSize:"".concat(.7*t.style.secondarySize,"px"),fontFamily:t.style.secondaryFont,fontWeight:t.style.secondaryWeight},children:t.secondary})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{style:{color:t.style.primaryColor,fontSize:"".concat(.7*t.style.primarySize,"px"),fontFamily:t.style.primaryFont,fontWeight:t.style.primaryWeight,fontStyle:"italic"===t.style.specialStyle?"italic":"normal"},children:t.primary}),e.jsx("div",{style:{color:t.style.secondaryColor,fontSize:"".concat(.7*t.style.secondarySize,"px"),fontFamily:t.style.secondaryFont,fontWeight:t.style.secondaryWeight,fontStyle:"script"===t.style.specialStyle?"italic":"normal"},children:t.secondary})]}),"q1-action"===t.id||"lets-connect"===t.id||"tax-season"===t.id?e.jsx("div",{className:"absolute bottom-2 right-2 rounded-full bg-amber-500 p-1",children:e.jsx(u.Star,{className:"h-3 w-3 text-white"})}):null]})},t.id)}))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 text-sidebar-foreground border-b border-border/20 pb-2",children:"Text Styles"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[[{label:"Heading",fontSize:32,fontWeight:"bold",fontFamily:"Arial, sans-serif",textAlign:"left"},{label:"Subheading",fontSize:24,fontWeight:"600",fontFamily:"Arial, sans-serif",textAlign:"left"},{label:"Body",fontSize:16,fontWeight:"normal",fontFamily:"Arial, sans-serif",textAlign:"left"},{label:"Caption",fontSize:12,fontWeight:"normal",fontFamily:"Arial, sans-serif",textAlign:"left"},{label:"Quote",fontSize:20,fontWeight:"normal",fontFamily:"Georgia, serif",textAlign:"left",fontStyle:"italic"}].map((function(t,a){return e.jsx("div",{className:"border border-border/40 rounded-lg p-3 cursor-pointer hover:border-sidebar-primary/70 hover:bg-sidebar-accent/40 transition-all duration-300",onClick:function(){return d(t.label,{fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle||"normal",fontFamily:t.fontFamily,textAlign:t.textAlign||"left"})},children:e.jsx("div",{className:"overflow-hidden text-ellipsis",style:{fontSize:"".concat(t.fontSize,"px"),fontWeight:"bold"===t.fontWeight?700:"semibold"===t.fontWeight?600:(t.fontWeight,400),fontStyle:"italic"===t.fontStyle?"italic":"normal",fontFamily:t.fontFamily||"sans-serif"},children:t.label})},a)})),e.jsx(ie,{variant:"outline",className:"w-full text-sm mt-2 bg-gradient-to-r from-sidebar-primary/10 to-sidebar-accent/30 hover:from-sidebar-primary/20 hover:to-sidebar-accent/40 border-border/40 transition-all duration-300",onClick:function(){return d("Custom Text")},children:"Add Custom Text"})]})]})]})]})]})]})};k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsxs(T.Root,I({ref:a,className:J("relative flex w-full touch-none select-none items-center",r)},s,{children:[e.jsx(T.Track,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(T.Range,{className:"absolute h-full bg-primary"})}),e.jsx(T.Thumb,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}))})).displayName=T.Root.displayName;var qe=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsxs(T.Root,I({ref:a,className:J("relative flex w-full touch-none select-none items-center",r)},s,{children:[e.jsx(T.Track,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-secondary/50",children:e.jsx(T.Range,{className:"absolute h-full bg-primary transition-all"})}),e.jsx(T.Thumb,{className:"block h-4 w-4 rounded-full border border-primary bg-background shadow-sm ring-offset-background transition-all hover:scale-110 active:scale-95 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 disabled:pointer-events-none disabled:opacity-50"})]}))}));qe.displayName="SmoothSlider";var Je=d.cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),He=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(P.Root,I({ref:a,className:J(Je(),r)},s))}));He.displayName=P.Root.displayName;var Ve=O.Root,Ke=O.Trigger,Ge=k.forwardRef((function(t,a){var r=t.className,s=t.align,n=void 0===s?"center":s,i=t.sideOffset,o=void 0===i?4:i,l=W(t,["className","align","sideOffset"]);return e.jsx(O.Portal,{children:e.jsx(O.Content,I({ref:a,align:n,sideOffset:o,className:J("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},l))})}));Ge.displayName=O.Content.displayName;var Xe=function(a){var r=a.color,s=void 0===r?"#000000":r,n=a.onChange,i=a.disableAlpha,o=void 0!==i&&i;a.showInputs;var l=t.useState(!1),c=l[0],d=l[1],u=t.useState(s),m=u[0],f=u[1];t.useEffect((function(){f(s||"#000000")}),[s]);return e.jsxs(Ve,{open:c,onOpenChange:d,children:[e.jsx(Ke,{asChild:!0,children:e.jsx("button",{className:"w-10 h-10 rounded border border-input overflow-hidden",style:{background:m},"aria-label":"Pick a color"})}),e.jsx(Ge,{className:"w-auto p-0 border-none shadow-lg",align:"start",children:e.jsx(x.ChromePicker,{color:m,onChange:function(e){var t=e.hex;f(t),n(t)},disableAlpha:o,styles:{default:{picker:{boxShadow:"none",borderRadius:"0",width:"225px"}}}})})]})},Ye=k.forwardRef((function(t,a){var r=t.className,s=t.orientation,n=void 0===s?"horizontal":s,i=t.decorative,o=void 0===i||i,l=W(t,["className","orientation","decorative"]);return e.jsx(R.Root,I({ref:a,decorative:o,orientation:n,className:J("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r)},l))}));Ye.displayName=R.Root.displayName;var _e=function(a){var r=a.collapsed,s=a.onToggle,n=re(),i=n.activeObject,o=n.removeActiveObject,c=n.bringForward,d=n.sendBackward,m=n.bringToFront,f=n.sendToBack,h=n.canvas,p=t.useState("style"),g=p[0],x=p[1],v=t.useState({}),b=v[0],j=v[1];t.useEffect((function(){if(i)try{var e={};e.type=i.type,e.left=Math.round(i.left||0),e.top=Math.round(i.top||0),e.width=Math.round(i.width||0),e.height=Math.round(i.height||0),e.angle=i.angle||0,e.opacity=i.opacity||1;var t=i.fill||"#000000";if(e.fill=t,"textbox"===i.type||"text"===i.type||"i-text"===i.type){var a=i;e.text=a.text||"",e.fontSize=a.fontSize||20,e.fontFamily=a.fontFamily||"Arial",e.fontWeight=a.fontWeight||"normal",e.fontStyle=a.fontStyle||"normal",e.textAlign=a.textAlign||"left",e.charSpacing=a.charSpacing||0,e.lineHeight=a.lineHeight||1.16}else if("image"===i.type){var r=i;e.src=r.src||""}else"rect"!==i.type&&"circle"!==i.type&&"triangle"!==i.type||(e.stroke=i.stroke||"",e.strokeWidth=i.strokeWidth||0);j(e)}catch(e){console.error("Error getting object properties:",e)}else j({})}),[i]);var N=t.useMemo((function(){return y((function(e,t){e&&t&&(t.renderAll(),t.fire("object:modified",{target:e}))}),50)}),[]),w=function(e,t){if(i&&h)try{j((function(a){var r;return I(I({},a),((r={})[e]=t,r))})),e in i&&(i[e]=t),"fill"===e&&i.set("fill",t),h.requestRenderAll(),N(i,h)}catch(t){console.error("Error updating property ".concat(e,":"),t),l.toast.error("Failed to update property. Please try again.")}},S=function(t){var a=t.title,r=t.children;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:a}),e.jsx(Ye,{className:"flex-1 mx-2"})]}),e.jsx("div",{className:"space-y-3 pl-0.5",children:r})]})};return e.jsxs("div",{className:J("editor-properties panel-transition bg-white/95 shadow-md dark:bg-gray-800/95",r?"collapsed":""),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-secondary/40",children:[e.jsxs("h3",{className:"font-medium text-base text-foreground flex items-center gap-2",children:[e.jsx(u.Settings,{className:"h-4 w-4 text-muted-foreground"}),"Properties"]}),e.jsx(ie,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8 rounded-full hover:bg-secondary",children:r?e.jsx(u.ChevronLeft,{className:"h-4 w-4"}):e.jsx(u.ChevronRight,{className:"h-4 w-4"})})]}),i?e.jsxs(le,{defaultValue:"style",value:g,onValueChange:x,className:"w-full",children:[e.jsxs(ce,{className:"w-full grid grid-cols-3 p-1 bg-secondary/40 border-b border-border",children:[e.jsxs(de,{value:"style",className:"text-xs rounded-md data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(u.Settings,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Style"})]}),e.jsxs(de,{value:"position",className:"text-xs rounded-md data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(u.Move,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Position"})]}),e.jsxs(de,{value:"arrange",className:"text-xs rounded-md data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(u.Layers,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Arrange"})]})]}),e.jsxs(me,{className:"h-[calc(100vh-180px)] overflow-y-auto",children:[e.jsxs(ue,{value:"style",className:"p-5 space-y-6 focus:outline-none",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("span",{className:"px-3 py-1 bg-secondary/60 text-xs font-medium rounded-full text-muted-foreground capitalize",children:[b.type||"Unknown"," Element"]})}),e.jsx(S,{title:"Appearance",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Fill Color"}),e.jsx(Xe,{color:b.fill||"#000000",onChange:function(e){w("fill",e)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Opacity"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(100*(b.opacity||1)),"%"]})]}),e.jsx(qe,{value:[100*(b.opacity||1)],min:0,max:100,step:1,onValueChange:function(e){return w("opacity",e[0]/100)},className:"my-1"})]})]})}),("textbox"===b.type||"text"===b.type||"i-text"===b.type)&&e.jsx(S,{title:"Typography",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Font Size"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[b.fontSize||20,"px"]})]}),e.jsx(qe,{value:[b.fontSize||20],min:8,max:72,step:1,onValueChange:function(e){return w("fontSize",e[0])},className:"my-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Font Family"}),e.jsxs("select",{className:"w-full p-2 text-sm border border-input rounded-md bg-background focus:ring-1 focus:ring-ring focus:outline-none",value:b.fontFamily||"Arial",onChange:function(e){return w("fontFamily",e.target.value)},children:[e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Helvetica",children:"Helvetica"}),e.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),e.jsx("option",{value:"Courier New",children:"Courier New"}),e.jsx("option",{value:"Georgia",children:"Georgia"}),e.jsx("option",{value:"Verdana",children:"Verdana"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"Open Sans",children:"Open Sans"}),e.jsx("option",{value:"Lato",children:"Lato"}),e.jsx("option",{value:"Montserrat",children:"Montserrat"}),e.jsx("option",{value:"Poppins",children:"Poppins"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(ie,{variant:"bold"===b.fontWeight?"default":"outline",size:"sm",onClick:function(){var e="bold"===b.fontWeight?"normal":"bold";w("fontWeight",e)},className:"h-8",children:"Bold"}),e.jsx(ie,{variant:"italic"===b.fontStyle?"default":"outline",size:"sm",onClick:function(){var e="italic"===b.fontStyle?"normal":"italic";w("fontStyle",e)},className:"h-8",children:"Italic"}),e.jsx(ie,{variant:b.underline?"default":"outline",size:"sm",onClick:function(){var e=!b.underline;w("underline",e)},className:"h-8",children:"Underline"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Text Align"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["left","center","right","justify"].map((function(t){return e.jsx(ie,{variant:b.textAlign===t?"default":"outline",size:"sm",onClick:function(){return w("textAlign",t)},className:"h-8 px-0 text-xs",children:t.charAt(0).toUpperCase()+t.slice(1)},t)}))})]})]})}),("rect"===b.type||"circle"===b.type||"triangle"===b.type)&&e.jsx(S,{title:"Stroke",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Stroke Color"}),e.jsx(Xe,{color:b.stroke||"#000000",onChange:function(e){w("stroke",e)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Stroke Width"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[b.strokeWidth||0,"px"]})]}),e.jsx(qe,{value:[b.strokeWidth||0],min:0,max:20,step:1,onValueChange:function(e){return w("strokeWidth",e[0])},className:"my-1"})]})]})})]}),e.jsxs(ue,{value:"position",className:"p-5 space-y-6 focus:outline-none",children:[e.jsx(S,{title:"Position & Size",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"X Position"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",className:"w-full p-2 text-sm border border-input rounded-md bg-background focus:ring-1 focus:ring-ring focus:outline-none",value:b.left||0,onChange:function(e){return w("left",Number(e.target.value))}}),e.jsx("span",{className:"ml-2 self-center text-xs text-muted-foreground",children:"px"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Y Position"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",className:"w-full p-2 text-sm border border-input rounded-md bg-background focus:ring-1 focus:ring-ring focus:outline-none",value:b.top||0,onChange:function(e){return w("top",Number(e.target.value))}}),e.jsx("span",{className:"ml-2 self-center text-xs text-muted-foreground",children:"px"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Width"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",className:"w-full p-2 text-sm border border-input rounded-md bg-background focus:ring-1 focus:ring-ring focus:outline-none",value:b.width||0,onChange:function(e){return w("width",Number(e.target.value))}}),e.jsx("span",{className:"ml-2 self-center text-xs text-muted-foreground",children:"px"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Height"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",className:"w-full p-2 text-sm border border-input rounded-md bg-background focus:ring-1 focus:ring-ring focus:outline-none",value:b.height||0,onChange:function(e){return w("height",Number(e.target.value))}}),e.jsx("span",{className:"ml-2 self-center text-xs text-muted-foreground",children:"px"})]})]})]})}),e.jsx(S,{title:"Rotation",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(He,{className:"text-xs text-muted-foreground font-medium",children:"Angle"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(b.angle||0),"Â°"]})]}),e.jsx(qe,{value:[b.angle||0],min:0,max:360,step:1,onValueChange:function(e){return w("angle",e[0])},className:"my-1"}),e.jsxs("div",{className:"flex justify-between gap-2 mt-2",children:[e.jsx(ie,{variant:"outline",size:"sm",className:"flex-1 h-8 text-xs",onClick:function(){return w("angle",0)},children:"Reset"}),e.jsx(ie,{variant:"outline",size:"sm",className:"flex-1 h-8 text-xs",onClick:function(){return w("angle",((b.angle||0)+90)%360)},children:"+90Â°"})]})]})})]}),e.jsxs(ue,{value:"arrange",className:"p-5 space-y-6 focus:outline-none",children:[e.jsx(S,{title:"Layer Position",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:c,className:"h-9 text-xs",children:[e.jsx(u.Layers,{className:"h-3.5 w-3.5 mr-1"}),"Bring Forward"]}),e.jsxs(ie,{variant:"outline",size:"sm",onClick:d,className:"h-9 text-xs",children:[e.jsx(u.Layers,{className:"h-3.5 w-3.5 mr-1 transform rotate-180"}),"Send Backward"]}),e.jsxs(ie,{variant:"outline",size:"sm",onClick:m,className:"h-9 text-xs",children:[e.jsx(u.Layers,{className:"h-3.5 w-3.5 mr-1"}),"Bring to Front"]}),e.jsxs(ie,{variant:"outline",size:"sm",onClick:f,className:"h-9 text-xs",children:[e.jsx(u.Layers,{className:"h-3.5 w-3.5 mr-1 transform rotate-180"}),"Send to Back"]})]})}),e.jsx("div",{className:"pt-6 border-t border-border",children:e.jsxs(ie,{variant:"destructive",size:"sm",className:"w-full h-9",onClick:o,children:[e.jsx(u.Trash2,{className:"h-4 w-4 mr-2"}),"Delete Element"]})})]})]})]}):e.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center h-[200px] text-muted-foreground space-y-2",children:[e.jsx(u.Settings,{className:"h-12 w-12 text-muted-foreground/30"}),e.jsx("p",{children:"Select an element to edit its properties"})]})]})},Ze=E.Root,Qe=E.Trigger;k.forwardRef((function(t,a){var r=t.className,s=t.inset,n=t.children,i=W(t,["className","inset","children"]);return e.jsxs(E.SubTrigger,I({ref:a,className:J("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",s&&"pl-8",r)},i,{children:[n,e.jsx(u.ChevronRight,{className:"ml-auto h-4 w-4"})]}))})).displayName=E.SubTrigger.displayName,k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(E.SubContent,I({ref:a,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},s))})).displayName=E.SubContent.displayName;var $e=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(E.Portal,{children:e.jsx(E.Content,I({ref:a,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},s))})}));$e.displayName=E.Content.displayName;var et=k.forwardRef((function(t,a){var r=t.className,s=t.inset,n=W(t,["className","inset"]);return e.jsx(E.Item,I({ref:a,className:J("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",r)},n))}));et.displayName=E.Item.displayName,k.forwardRef((function(t,a){var r=t.className,s=t.children,n=t.checked,i=W(t,["className","children","checked"]);return e.jsxs(E.CheckboxItem,I({ref:a,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:n},i,{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(E.ItemIndicator,{children:e.jsx(u.Check,{className:"h-4 w-4"})})}),s]}))})).displayName=E.CheckboxItem.displayName,k.forwardRef((function(t,a){var r=t.className,s=t.children,n=W(t,["className","children"]);return e.jsxs(E.RadioItem,I({ref:a,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},n,{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(E.ItemIndicator,{children:e.jsx(u.Circle,{className:"h-2 w-2 fill-current"})})}),s]}))})).displayName=E.RadioItem.displayName,k.forwardRef((function(t,a){var r=t.className,s=t.inset,n=W(t,["className","inset"]);return e.jsx(E.Label,I({ref:a,className:J("px-2 py-1.5 text-sm font-semibold text-foreground",s&&"pl-8",r)},n))})).displayName=E.Label.displayName;var tt=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(E.Separator,I({ref:a,className:J("-mx-1 my-1 h-px bg-border",r)},s))}));tt.displayName=E.Separator.displayName;var at=function(t){var a=t.className,r=W(t,["className"]);return e.jsx("span",I({className:J("ml-auto text-xs tracking-widest text-muted-foreground",a)},r))};at.displayName="ContextMenuShortcut";var rt=function(){var t=re(),a=t.copyToClipboard,r=t.pasteFromClipboard,s=t.pasteAtPosition,n=t.activeObject,i=t.canvas;return e.jsxs(e.Fragment,{children:[e.jsxs(et,{onClick:function(){return a()},children:[e.jsx(u.Copy,{className:"mr-2 h-4 w-4"}),"Copy",e.jsx(at,{children:"âŒ˜C"})]}),e.jsxs(et,{onClick:function(e){if(i){var t=i.getPointer(e.nativeEvent);s(t.x,t.y)}},children:[e.jsx(u.ClipboardPaste,{className:"mr-2 h-4 w-4"}),"Paste here"]}),e.jsxs(et,{disabled:!n,onClick:function(){n&&r()},children:[e.jsx(u.ArrowRightLeft,{className:"mr-2 h-4 w-4"}),"Paste to replace",e.jsx(at,{children:"âŒ˜â‡§R"})]}),e.jsx(tt,{})]})},st=function(){var t=re(),a=t.bringToFront,r=t.bringForward,s=t.sendBackward,n=t.sendToBack,i=t.activeObject;return e.jsxs(e.Fragment,{children:[e.jsxs(et,{onClick:function(){return a()},disabled:!i,children:[e.jsx(u.MoveUp,{className:"mr-2 h-4 w-4"}),"Bring to front",e.jsx(at,{children:"]"})]}),e.jsxs(et,{onClick:function(){return r()},disabled:!i,children:[e.jsx(u.MoveUp,{className:"mr-2 h-4 w-4"}),"Bring forward"]}),e.jsxs(et,{onClick:function(){return s()},disabled:!i,children:[e.jsx(u.MoveDown,{className:"mr-2 h-4 w-4"}),"Send backward"]}),e.jsxs(et,{onClick:function(){return n()},disabled:!i,children:[e.jsx(u.MoveDown,{className:"mr-2 h-4 w-4"}),"Send to back",e.jsx(at,{children:"["})]}),e.jsx(tt,{})]})},nt=function(){var t=re(),a=t.groupSelected,r=t.ungroupSelected,s=t.activeObject;return e.jsxs(e.Fragment,{children:[e.jsxs(et,{onClick:function(){return a()},disabled:!s||!s.type||"activeSelection"!==s.type,children:[e.jsx(u.Package,{className:"mr-2 h-4 w-4"}),"Group selection",e.jsx(at,{children:"âŒ˜G"})]}),e.jsxs(et,{onClick:function(){return r()},disabled:!s||!s.type||"group"!==s.type,children:[e.jsx(u.PackageOpen,{className:"mr-2 h-4 w-4"}),"Ungroup",e.jsx(at,{children:"âŒ˜â‡§G"})]}),e.jsx(tt,{})]})},it=function(){var t=re(),a=t.activeObject,r=t.canvas;return e.jsxs(e.Fragment,{children:[e.jsxs(et,{onClick:function(){a&&r&&(a.set("selectable",!a.selectable),a.set("evented",!a.evented),r.renderAll())},disabled:!a,children:[(null==a?void 0:a.selectable)?e.jsxs(e.Fragment,{children:[e.jsx(u.Lock,{className:"mr-2 h-4 w-4"}),"Lock"]}):e.jsxs(e.Fragment,{children:[e.jsx(u.Unlock,{className:"mr-2 h-4 w-4"}),"Unlock"]}),e.jsx(at,{children:"âŒ˜L"})]}),e.jsxs(et,{onClick:function(){a&&r&&(a.set("visible",!a.visible),r.renderAll())},disabled:!a,children:[!1!==(null==a?void 0:a.visible)?e.jsxs(e.Fragment,{children:[e.jsx(u.EyeOff,{className:"mr-2 h-4 w-4"}),"Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(u.Eye,{className:"mr-2 h-4 w-4"}),"Show"]}),e.jsx(at,{children:"âŒ˜H"})]}),e.jsx(tt,{})]})},ot=function(){var t=re(),a=t.activeObject,r=t.canvas,s=t.removeActiveObject;return e.jsxs(e.Fragment,{children:[e.jsxs(et,{onClick:function(){a&&r&&(a.set("flipX",!a.flipX),r.renderAll())},disabled:!a,children:[e.jsx(u.FlipHorizontal,{className:"mr-2 h-4 w-4"}),"Flip horizontal",e.jsx(at,{children:"H"})]}),e.jsxs(et,{onClick:function(){a&&r&&(a.set("flipY",!a.flipY),r.renderAll())},disabled:!a,children:[e.jsx(u.FlipVertical,{className:"mr-2 h-4 w-4"}),"Flip vertical",e.jsx(at,{children:"V"})]}),e.jsx(tt,{}),e.jsxs(et,{onClick:function(){return s()},disabled:!a,children:[e.jsx(u.Send,{className:"mr-2 h-4 w-4"}),"Delete",e.jsx(at,{children:"Delete"})]})]})},lt=function(t){var a=t.children;return re().canvas,e.jsxs(Ze,{children:[e.jsx(Qe,{className:"w-full h-full",children:a}),e.jsxs($e,{className:"w-64 bg-popover shadow-lg",children:[e.jsx(rt,{}),e.jsx(st,{}),e.jsx(nt,{}),e.jsx(it,{}),e.jsx(ot,{})]})]})},ct=function(e){if(!e)return e;try{"text"!==e.type&&"i-text"!==e.type&&"textbox"!==e.type||(e.fontFamily||(e.set("fontFamily","Arial"),console.log("Fixed missing fontFamily in Canvas")),e.fontSize&&!isNaN(e.fontSize)||(e.set("fontSize",20),console.log("Fixed missing or invalid fontSize in Canvas")),e.fontStyle&&["","normal","italic","oblique"].includes(e.fontStyle)||(e.set("fontStyle","normal"),console.log("Fixed invalid fontStyle in Canvas")),void 0!==e.fontWeight&&null!==e.fontWeight||(e.set("fontWeight","normal"),console.log("Fixed missing fontWeight in Canvas")),void 0!==e.textAlign&&null!==e.textAlign||(e.set("textAlign","left"),console.log("Fixed missing textAlign in Canvas")),void 0===e.underline&&e.set("underline",!1),e._forceClearCache=!0),void 0!==e.fill&&null!==e.fill||(e.set("fill","#000000"),console.log("Fixed missing fill in Canvas"))}catch(e){console.error("Error in ensureValidTextProperties:",e)}return e},dt=function(e){if(!e)return e;try{void 0===e.selectable&&e.set("selectable",!0),void 0===e.hasControls&&e.set("hasControls",!0),void 0===e.hasBorders&&e.set("hasBorders",!0),void 0!==e.fill||"rect"!==e.type&&"circle"!==e.type&&"triangle"!==e.type||(e.set("fill","#000000"),console.log("Fixed missing fill in Canvas for shape"))}catch(e){console.error("Error in ensureObjectProperties:",e)}return e},ut=function(){var a=t.useRef(null),r=t.useRef(null),s=re(),n=s.canvas,i=s.canvasSize,o=s.initCanvas,c=s.saveToHistory,d=s.canvasBackgroundColor,u=s.isPanEnabled;return function(){var e=re(),a=e.undo,r=e.redo,s=e.removeActiveObject,n=e.copyToClipboard,i=e.pasteFromClipboard,o=e.setMode,l=e.addText,c=e.addRect,d=e.addCircle,u=e.zoomIn,m=e.zoomOut,f=e.resetZoom,h=e.selectAll,p=e.clearCanvas,g=t.useCallback((function(e){document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLSelectElement||(!e.metaKey&&!e.ctrlKey||"z"!==e.key||e.shiftKey||(e.preventDefault(),console.log("Undo keyboard shortcut triggered"),a()),(e.metaKey||e.ctrlKey)&&"z"===e.key&&e.shiftKey&&(e.preventDefault(),console.log("Redo keyboard shortcut triggered"),r()),(e.metaKey||e.ctrlKey)&&"y"===e.key&&(e.preventDefault(),console.log("Redo keyboard shortcut triggered (Ctrl+Y)"),r()),"Delete"!==e.key&&"Backspace"!==e.key||(e.preventDefault(),s()),(e.metaKey||e.ctrlKey)&&"c"===e.key&&n(),(e.metaKey||e.ctrlKey)&&"v"===e.key&&i(),(e.metaKey||e.ctrlKey)&&"a"===e.key&&(e.preventDefault(),h()),"v"!==e.key||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||o("select"),"t"!==e.key||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||(o("text"),l("New text")),"r"!==e.key||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||(o("shape"),c()),"c"!==e.key||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||(o("shape"),d()),"d"!==e.key||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||o("draw"),"i"!==e.key||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||o("image"),"+"!==e.key&&"="!==e.key||u(),"-"!==e.key&&"_"!==e.key||m(),"0"===e.key&&f(),"Escape"===e.key&&e.shiftKey&&p())}),[a,r,s,n,i,o,l,c,d,u,m,f,h,p]);t.useEffect((function(){return window.addEventListener("keydown",g),function(){window.removeEventListener("keydown",g)}}),[g])}(),t.useEffect((function(){if(a.current){var e=o(a.current);e&&(e.selectionColor="rgba(65, 105, 225, 0.2)",e.selectionBorderColor="#4169e1",e.selectionLineWidth=1,e.on("before:render",(function(){try{e.getObjects().forEach((function(e){"text"!==e.type&&"i-text"!==e.type&&"textbox"!==e.type||ct(e),dt(e)}))}catch(e){console.error("Error in before:render handler:",e)}})),e.on("mouse:down",(function(e){e.target&&("text"!==e.target.type&&"i-text"!==e.target.type&&"textbox"!==e.target.type||ct(e.target),dt(e.target))})),e.on("object:added",(function(e){e.target&&("text"!==e.target.type&&"i-text"!==e.target.type&&"textbox"!==e.target.type||ct(e.target),dt(e.target),console.log("Object added to canvas:",e.target.type))})),e.on("selection:created",(function(e){var t;console.log("Selection created:",null===(t=e.selected)||void 0===t?void 0:t.map((function(e){return e.type}))),e.selected&&e.selected.length>0&&e.selected.forEach((function(e){dt(e),console.log("Selected object:",e.type,"fill:",e.fill)}))})),e.on("selection:updated",(function(e){var t;console.log("Selection updated:",null===(t=e.selected)||void 0===t?void 0:t.map((function(e){return e.type}))),e.selected&&e.selected.length>0&&e.selected.forEach((function(e){dt(e),console.log("Updated selected object:",e.type,"fill:",e.fill)}))})),e.on("object:modified",(function(t){t.target&&("text"!==t.target.type&&"i-text"!==t.target.type&&"textbox"!==t.target.type||ct(t.target),dt(t.target),console.log("Fixed properties on object:modified"),c&&c(e))})));var t=document.createElement("div");return t.style.opacity="0",t.style.position="absolute",t.style.pointerEvents="none",["Arial","Helvetica","Times New Roman","Courier New","Georgia","Verdana","Roboto","Open Sans","Playfair Display"].forEach((function(e){var a=document.createElement("span");a.style.fontFamily=e,a.innerText="Preloading Font",t.appendChild(a)})),document.body.appendChild(t),l.toast.info("Tip: Use Ctrl+A to select all elements, then Delete to remove them all at once",{id:"canvas-tip",duration:5e3}),function(){n&&n.dispose(),document.getElementById("fontPreloader")&&document.body.removeChild(document.getElementById("fontPreloader"))}}}),[]),t.useEffect((function(){n&&(n.setWidth(i.width),n.setHeight(i.height),n.renderAll())}),[n,i]),t.useEffect((function(){n&&(n.backgroundColor=d,n.renderAll())}),[n,d]),e.jsxs("div",{className:"editor-main",children:[e.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Roboto:wght@300;400;500;700&family=Playfair+Display:wght@400;700&family=Open+Sans:wght@400;600&display=swap",rel:"stylesheet"}),e.jsx(lt,{children:e.jsx("div",{className:"canvas-wrapper flex justify-center items-center h-full w-full",children:e.jsx("div",{ref:r,className:J("editor-canvas-container animate-fade-in",u?"cursor-grab active:cursor-grabbing":""),style:{width:i.width,height:i.height,position:"relative",overflow:"hidden"},children:e.jsx("canvas",{ref:a,id:"fabric-canvas",className:J("absolute top-0 left-0","touch-none select-none",u?"cursor-grab active:cursor-grabbing":"")})})})})]})},mt=L.Root,ft=L.Value,ht=k.forwardRef((function(t,a){var r=t.className,s=t.children,n=W(t,["className","children"]);return e.jsxs(L.Trigger,I({ref:a,className:J("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},n,{children:[s,e.jsx(L.Icon,{asChild:!0,children:e.jsx(u.ChevronDown,{className:"h-4 w-4 opacity-50"})})]}))}));ht.displayName=L.Trigger.displayName;var pt=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(L.ScrollUpButton,I({ref:a,className:J("flex cursor-default items-center justify-center py-1",r)},s,{children:e.jsx(u.ChevronUp,{className:"h-4 w-4"})}))}));pt.displayName=L.ScrollUpButton.displayName;var gt=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(L.ScrollDownButton,I({ref:a,className:J("flex cursor-default items-center justify-center py-1",r)},s,{children:e.jsx(u.ChevronDown,{className:"h-4 w-4"})}))}));gt.displayName=L.ScrollDownButton.displayName;var xt=k.forwardRef((function(t,a){var r=t.className,s=t.children,n=t.position,i=void 0===n?"popper":n,o=W(t,["className","children","position"]);return e.jsx(L.Portal,{children:e.jsxs(L.Content,I({ref:a,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i},o,{children:[e.jsx(pt,{}),e.jsx(L.Viewport,{className:J("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(gt,{})]}))})}));xt.displayName=L.Content.displayName,k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(L.Label,I({ref:a,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold",r)},s))})).displayName=L.Label.displayName;var vt=k.forwardRef((function(t,a){var r=t.className,s=t.children,n=W(t,["className","children"]);return e.jsxs(L.Item,I({ref:a,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},n,{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(L.ItemIndicator,{children:e.jsx(u.Check,{className:"h-4 w-4"})})}),e.jsx(L.ItemText,{children:s})]}))}));vt.displayName=L.Item.displayName,k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(L.Separator,I({ref:a,className:J("-mx-1 my-1 h-px bg-muted",r)},s))})).displayName=L.Separator.displayName;var bt=[{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Courier New",label:"Courier New"},{value:"Georgia",label:"Georgia"},{value:"Verdana",label:"Verdana"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Lato",label:"Lato"},{value:"Montserrat",label:"Montserrat"},{value:"Raleway",label:"Raleway"},{value:"Poppins",label:"Poppins"},{value:"Oswald",label:"Oswald"},{value:"Source Sans 3",label:"Source Sans"},{value:"Roboto Condensed",label:"Roboto Condensed"},{value:"PT Sans",label:"PT Sans"},{value:"Nunito",label:"Nunito"},{value:"Work Sans",label:"Work Sans"},{value:"Fira Sans",label:"Fira Sans"},{value:"Quicksand",label:"Quicksand"},{value:"Mulish",label:"Mulish"},{value:"Ubuntu",label:"Ubuntu"},{value:"Comfortaa",label:"Comfortaa"},{value:"Josefin Sans",label:"Josefin Sans"},{value:"Arimo",label:"Arimo"},{value:"Cabin",label:"Cabin"},{value:"Exo 2",label:"Exo 2"},{value:"PT Sans Narrow",label:"PT Sans Narrow"},{value:"Overpass",label:"Overpass"},{value:"Nanum Gothic",label:"Nanum Gothic"},{value:"Libre Franklin",label:"Libre Franklin"},{value:"Encode Sans",label:"Encode Sans"},{value:"Dosis",label:"Dosis"},{value:"Alegreya Sans",label:"Alegreya Sans"},{value:"Playfair Display",label:"Playfair Display"},{value:"Merriweather",label:"Merriweather"},{value:"Lora",label:"Lora"},{value:"PT Serif",label:"PT Serif"},{value:"Roboto Slab",label:"Roboto Slab"},{value:"Crimson Text",label:"Crimson Text"},{value:"Libre Baskerville",label:"Libre Baskerville"},{value:"Source Serif Pro",label:"Source Serif Pro"},{value:"Cormorant Garamond",label:"Cormorant Garamond"},{value:"Bitter",label:"Bitter"},{value:"Arvo",label:"Arvo"},{value:"Spectral",label:"Spectral"},{value:"Alegreya",label:"Alegreya"},{value:"Josefin Slab",label:"Josefin Slab"},{value:"Dancing Script",label:"Dancing Script"},{value:"Abril Fatface",label:"Abril Fatface"},{value:"Pacifico",label:"Pacifico"},{value:"Lobster",label:"Lobster"},{value:"Amatic SC",label:"Amatic SC"},{value:"Sacramento",label:"Sacramento"},{value:"Roboto Mono",label:"Roboto Mono"},{value:"Source Code Pro",label:"Source Code Pro"},{value:"Inconsolata",label:"Inconsolata"},{value:"Ubuntu Mono",label:"Ubuntu Mono"},{value:"Space Mono",label:"Space Mono"}],yt=function(){var a=re(),r=a.activeObject,s=a.canvas,n=t.useState(20),i=n[0],o=n[1],l=t.useState("Arial"),c=l[0],d=l[1],m=t.useState("left"),f=m[0],h=m[1],p=t.useState(!1),g=p[0],x=p[1],v=t.useState(!1),b=v[0],y=v[1],j=t.useState(!1),N=j[0],w=j[1],S=t.useState("#000000"),C=S[0],k=S[1],z=r&&("text"===r.type||"textbox"===r.type||"i-text"===r.type);t.useEffect((function(){if(r&&z){var e=r;!function(e){e.fontFamily||(e.fontFamily="Arial",console.log("Fixed missing fontFamily in toolbar")),e.fontSize||(e.fontSize=20,console.log("Fixed missing fontSize in toolbar")),e.fontStyle&&["","normal","italic","oblique"].includes(e.fontStyle)||(e.fontStyle="normal",console.log("Fixed invalid fontStyle in toolbar")),void 0!==e.fontWeight&&null!==e.fontWeight||(e.fontWeight="normal",console.log("Fixed missing fontWeight in toolbar")),void 0!==e.textAlign&&null!==e.textAlign||(e.textAlign="left",console.log("Fixed missing textAlign in toolbar"))}(e),o(e.fontSize||20),d(e.fontFamily||"Arial"),h(e.textAlign||"left"),x("bold"===e.fontWeight),y("italic"===e.fontStyle),w(!!e.underline),k(e.fill||"#000000")}}),[r,z]);var A=function(e,t){s&&r&&z&&("fontFamily"!==e||t||(t="Arial"),"fontStyle"!==e||["","normal","italic","oblique"].includes(t)||(t="normal"),"textAlign"===e&&console.log("Setting textAlign from ".concat(r.textAlign," to ").concat(t)),r[e]=t,console.log("Updated ".concat(e," to:"),r[e]),s.renderAll(),s.fire("object:modified",{target:r}))},F=function(e){z&&(h(e),A("textAlign",e),s&&s.requestRenderAll())};return z?e.jsxs("div",{className:"text-editor-toolbar bg-white border-b border-gray-200 flex items-center gap-2 z-10 p-2 overflow-x-auto",children:[e.jsx("div",{className:"text-editor-section flex-shrink-0",children:e.jsxs(mt,{value:c,onValueChange:function(e){if(z){var t=e||"Arial";d(t),A("fontFamily",t)}},children:[e.jsx(ht,{className:"w-[150px] h-10",children:e.jsx(ft,{placeholder:"Select Font"})}),e.jsx(xt,{className:"max-h-[300px]",children:bt.map((function(t){return e.jsx(vt,{value:t.value,style:{fontFamily:t.value},className:"text-base py-2",children:t.label},t.value)}))})]})}),e.jsx(Ye,{orientation:"vertical",className:"h-8"}),e.jsxs("div",{className:"text-editor-section flex-shrink-0 flex items-center border rounded-md",children:[e.jsx(ie,{variant:"ghost",size:"icon",className:"h-10 rounded-r-none border-r",onClick:function(){if(z){var e=Math.max(8,i-1);o(e),A("fontSize",e)}},children:e.jsx(u.Minus,{className:"h-4 w-4"})}),e.jsx("div",{className:"px-3 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:i})}),e.jsx(ie,{variant:"ghost",size:"icon",className:"h-10 rounded-l-none border-l",onClick:function(){if(z){var e=Math.min(72,i+1);o(e),A("fontSize",e)}},children:e.jsx(u.Plus,{className:"h-4 w-4"})})]}),e.jsx(Ye,{orientation:"vertical",className:"h-8"}),e.jsx("div",{className:"text-editor-section flex-shrink-0",children:e.jsx(Xe,{color:C,onChange:function(e){z&&(k(e),A("fill",e))}})}),e.jsx(Ye,{orientation:"vertical",className:"h-8"}),e.jsxs("div",{className:"text-editor-section flex-shrink-0 flex items-center",children:[e.jsxs(ie,{variant:g?"default":"outline",size:"sm",onClick:function(){if(z){var e=g?"normal":"bold";x(!g),A("fontWeight",e)}},className:"h-10 font-bold px-4",children:[e.jsx(u.Bold,{className:"h-4 w-4 mr-1"}),"Bold"]}),e.jsxs(ie,{variant:b?"default":"outline",size:"sm",onClick:function(){if(z){var e=b?"normal":"italic";y(!b),A("fontStyle",e)}},className:"h-10 italic px-4 ml-1",children:[e.jsx(u.Italic,{className:"h-4 w-4 mr-1"}),"Italic"]}),e.jsxs(ie,{variant:N?"default":"outline",size:"sm",onClick:function(){z&&(w(!N),A("underline",!N))},className:"h-10 px-4 ml-1",children:[e.jsx(u.Underline,{className:"h-4 w-4 mr-1"}),"Underline"]})]}),e.jsx(Ye,{orientation:"vertical",className:"h-8"}),e.jsxs("div",{className:"text-editor-section flex-shrink-0 flex items-center",children:[e.jsxs(ie,{variant:"left"===f?"default":"outline",size:"sm",onClick:function(){return F("left")},className:"h-10 px-3 rounded-r-none",children:[e.jsx(u.AlignLeft,{className:"h-4 w-4 mr-1"}),"Left"]}),e.jsxs(ie,{variant:"center"===f?"default":"outline",size:"sm",onClick:function(){return F("center")},className:"h-10 px-3 rounded-none border-l-0 border-r-0",children:[e.jsx(u.AlignCenter,{className:"h-4 w-4 mr-1"}),"Center"]}),e.jsxs(ie,{variant:"right"===f?"default":"outline",size:"sm",onClick:function(){return F("right")},className:"h-10 px-3 rounded-l-none",children:[e.jsx(u.AlignRight,{className:"h-4 w-4 mr-1"}),"Right"]})]}),e.jsxs(ie,{variant:"justify"===f?"default":"outline",size:"sm",onClick:function(){return F("justify")},className:"h-10 px-4 ml-1 flex-shrink-0",children:[e.jsx(u.AlignJustify,{className:"h-4 w-4 mr-1"}),"Justify"]})]}):null},jt=U.Root,Nt=U.Portal,wt=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(U.Overlay,I({ref:a,className:J("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},s))}));wt.displayName=U.Overlay.displayName;var St=k.forwardRef((function(t,a){var r=t.className,s=t.children,n=W(t,["className","children"]);return e.jsxs(Nt,{children:[e.jsx(wt,{}),e.jsxs(U.Content,I({ref:a,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},n,{children:[s,e.jsxs(U.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(u.X,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})}));St.displayName=U.Content.displayName;var Ct=function(t){var a=t.className,r=W(t,["className"]);return e.jsx("div",I({className:J("flex flex-col space-y-1.5 text-center sm:text-left",a)},r))};Ct.displayName="DialogHeader";var kt=function(t){var a=t.className,r=W(t,["className"]);return e.jsx("div",I({className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},r))};kt.displayName="DialogFooter";var zt=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(U.Title,I({ref:a,className:J("text-lg font-semibold leading-none tracking-tight",r)},s))}));zt.displayName=U.Title.displayName;var At=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(U.Description,I({ref:a,className:J("text-sm text-muted-foreground",r)},s))}));At.displayName=U.Description.displayName;var Ft=function(a){var r=a.isOpen,s=a.onClose,n=a.onExport,i=t.useState("png"),l=i[0],c=i[1],d=t.useState("normal"),m=d[0],f=d[1],h=t.useState(!1),p=h[0],g=h[1],x=re(),v=x.exportToImage,b=x.exportToHTML,y=x.downloadImage;return e.jsx(jt,{open:r,onOpenChange:s,children:e.jsxs(St,{className:"sm:max-w-md",children:[e.jsxs(Ct,{children:[e.jsx(zt,{children:"Export Design"}),e.jsx(ie,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:s,children:e.jsx(u.X,{className:"h-4 w-4"})})]}),e.jsxs(le,{defaultValue:"image",className:"mt-4",children:[e.jsxs(ce,{className:"grid grid-cols-2",children:[e.jsxs(de,{value:"image",children:[e.jsx(u.FileImage,{className:"h-4 w-4 mr-2"}),"Image"]}),e.jsxs(de,{value:"code",children:[e.jsx(u.Code,{className:"h-4 w-4 mr-2"}),"HTML"]})]}),e.jsxs(ue,{value:"image",className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Format"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(ie,{variant:"png"===l?"default":"outline",size:"sm",onClick:function(){return c("png")},children:"PNG"}),e.jsx(ie,{variant:"jpeg"===l?"default":"outline",size:"sm",onClick:function(){return c("jpeg")},children:"JPEG"}),e.jsx(ie,{variant:"svg"===l?"default":"outline",size:"sm",onClick:function(){return c("svg")},children:"SVG"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Quality"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ie,{variant:"normal"===m?"default":"outline",size:"sm",onClick:function(){return f("normal")},children:"Normal"}),e.jsx(ie,{variant:"high"===m?"default":"outline",size:"sm",onClick:function(){return f("high")},children:"High"})]})]})]}),e.jsxs(ue,{value:"code",className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"HTML Export"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Export your design as HTML to embed directly in websites."})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-md",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"The HTML output includes:"}),e.jsxs("ul",{className:"list-disc list-inside text-xs text-muted-foreground mt-2",children:[e.jsx("li",{children:"SVG representation of your canvas"}),e.jsx("li",{children:"Basic styling for web display"}),e.jsx("li",{children:"No external dependencies"})]})]}),e.jsx(ie,{variant:"outline",className:"w-full",onClick:function(){return c("html")},children:"Export as HTML"})]})]}),e.jsx(kt,{className:"mt-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ie,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(ie,{onClick:function(){return M(void 0,void 0,void 0,(function(){var e,t,a,r,s,i;return B(this,(function(c){switch(c.label){case 0:g(!0),c.label=1;case 1:return c.trys.push([1,6,7,8]),"html"!==l?[3,2]:(e=b(),s=new Blob([e],{type:"text/html"}),t=URL.createObjectURL(s),(a=document.createElement("a")).href=t,a.download="design.html",document.body.appendChild(a),a.click(),document.body.removeChild(a),[3,5]);case 2:return"svg"!==l?[3,4]:[4,v("svg",m)];case 3:return r=c.sent(),s=new Blob([decodeURIComponent(r.split(",")[1])],{type:"image/svg+xml"}),o.saveAs(s,"design.svg"),[3,5];case 4:y(l,m),c.label=5;case 5:return n(l),[3,8];case 6:return i=c.sent(),console.error("Export failed:",i),[3,8];case 7:return g(!1),[7];case 8:return[2]}}))}))},disabled:p,children:[p?"Processing...":"Download",!p&&e.jsx(u.Download,{className:"ml-2 h-4 w-4"})]})]})})]})})},Tt=function(a){var r=a.isOpen,s=a.onClose,n=a.currentSize,i=a.onResize,o=t.useState(n.width),l=o[0],c=o[1],d=t.useState(n.height),m=d[0],f=d[1],h=t.useState(!1),p=h[0],g=h[1],x=t.useState(n.width/n.height),v=x[0],b=x[1],y=t.useState(100),j=y[0],N=y[1],w=t.useState(100),S=w[0],C=w[1];t.useEffect((function(){r&&(c(n.width),f(n.height),b(n.width/n.height),N(100),C(100))}),[r,n]);return e.jsx(jt,{open:r,onOpenChange:function(e){return!e&&s()},children:e.jsxs(St,{className:"sm:max-w-[500px]",children:[e.jsxs(Ct,{children:[e.jsx(zt,{children:"Resize Canvas"}),e.jsxs(At,{children:["Adjust the dimensions of your canvas. Current size: ",n.width," Ã— ",n.height]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(He,{htmlFor:"width",children:"Width (px)"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[j,"%"]})]}),e.jsx(we,{id:"width",type:"number",min:"1",value:l,onChange:function(e){var t=parseInt(e.target.value)||1;if(c(t),N(Math.round(t/n.width*100)),p){var a=Math.round(t/v);f(a),C(Math.round(a/n.height*100))}}}),e.jsx(qe,{defaultValue:[100],value:[j],onValueChange:function(e){var t=e[0];N(t);var a=Math.round(n.width*t/100);if(c(a),p){var r=Math.round(a/v);f(r),C(Math.round(r/n.height*100))}},max:200,min:10,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(He,{htmlFor:"height",children:"Height (px)"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[S,"%"]})]}),e.jsx(we,{id:"height",type:"number",min:"1",value:m,onChange:function(e){var t=parseInt(e.target.value)||1;if(f(t),C(Math.round(t/n.height*100)),p){var a=Math.round(t*v);c(a),N(Math.round(a/n.width*100))}}}),e.jsx(qe,{defaultValue:[100],value:[S],onValueChange:function(e){var t=e[0];C(t);var a=Math.round(n.height*t/100);if(f(a),p){var r=Math.round(a*v);c(r),N(Math.round(r/n.width*100))}},max:200,min:10,step:1})]})]}),e.jsx(ie,{variant:"outline",className:"flex items-center gap-2",onClick:function(){return g(!p)},children:p?e.jsxs(e.Fragment,{children:[e.jsx(u.Lock,{className:"h-4 w-4"}),e.jsx("span",{children:"Unlock aspect ratio"})]}):e.jsxs(e.Fragment,{children:[e.jsx(u.Unlock,{className:"h-4 w-4"}),e.jsx("span",{children:"Lock aspect ratio"})]})}),e.jsxs("div",{className:"mt-2",children:[e.jsx(He,{className:"mb-2 block",children:"Preset Sizes"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Business Card",width:850,height:500},{name:"Instagram Post",width:1080,height:1080},{name:"A4 Document",width:1e3,height:1414},{name:"Twitter Post",width:1e3,height:500},{name:"Facebook Cover",width:1080,height:608},{name:"YouTube Thumbnail",width:1280,height:720},{name:"LinkedIn Banner",width:1128,height:191},{name:"Pinterest Pin",width:1e3,height:1500}].map((function(t,a){return e.jsxs(ie,{variant:"outline",className:"justify-start",onClick:function(){c(t.width),f(t.height),b(t.width/t.height),N(Math.round(t.width/n.width*100)),C(Math.round(t.height/n.height*100))},children:[e.jsx("span",{className:"truncate",children:t.name}),e.jsxs("span",{className:"ml-auto text-xs text-muted-foreground",children:[t.width,"Ã—",t.height]})]},a)}))})]})]}),e.jsxs(kt,{children:[e.jsx(ie,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(ie,{onClick:function(){i({width:l,height:m}),s()},children:"Resize"})]})]})})},Pt=function(a){var r=a.onSave,s=a.containerClassName,n=void 0===s?"":s;a.toolbarClassName;var i=a.canvasClassName,o=void 0===i?"":i,c=a.showLeftSidebar,d=void 0===c||c,u=a.showRightSidebar,m=void 0===u||u,f=t.useState(!d),h=f[0],p=f[1],g=t.useState(!m),x=g[0],v=g[1],b=t.useState(!1),y=b[0],j=b[1],N=t.useState(!1),w=N[0],S=N[1],C=t.useState("normal"),k=C[0];C[1];var z=re(),A=z.activeObject,F=z.zoomIn,T=z.zoomOut,P=z.resetZoom,O=z.zoom,R=z.undo,E=z.redo,L=z.saveToJSON,U=z.downloadImage,D=z.selectAll,I=z.clearCanvas,W=z.canvasSize,M=z.setCanvasSize,B=function(){p(!h)},q=function(){v(!x)};return A&&("text"===A.type||"textbox"===A.type||A.type),e.jsxs("div",{className:"design-editor flex flex-col h-screen ".concat(n),children:[e.jsx(oe,{onExport:function(){return j(!0)},onSave:function(){var e=L();return l.toast.success("Design saved successfully"),r&&r(e),e},onUndo:R,onRedo:E,onZoomIn:F,onZoomOut:T,onResetZoom:P,toggleLeftSidebar:B,toggleRightSidebar:q,zoom:O,onSelectAll:function(){D(),l.toast.success("All objects selected")},onClearCanvas:function(){I(),l.toast.success("Canvas cleared")},onResizeCanvas:function(){return S(!0)}}),e.jsx(yt,{}),e.jsxs("div",{className:"editor-workspace flex-1 flex ".concat(o),children:[d&&e.jsx(Be,{collapsed:h,onToggle:B}),e.jsx(ut,{}),m&&e.jsx(_e,{collapsed:x,onToggle:q})]}),e.jsx(Ft,{isOpen:y,onClose:function(){return j(!1)},onExport:function(e){console.log("Exporting as ".concat(e," with quality ").concat(k)),j(!1),("png"===e||"jpeg"===e||"svg"===e)&&U(e,k),l.toast.success("Design exported as ".concat(e.toUpperCase()))}}),e.jsx(Tt,{isOpen:w,onClose:function(){return S(!1)},currentSize:W,onResize:function(e){M(e),l.toast.success("Canvas resized to ".concat(e.width,"x").concat(e.height))}})]})},Ot=function(t){var a=t.initialTemplate,r=t.onSave,s=t.width,n=void 0===s?800:s,i=t.height,o=void 0===i?600:i,l=t.containerClassName,c=t.toolbarClassName,d=t.canvasClassName,u=t.showLeftSidebar,m=void 0===u||u,f=t.showRightSidebar,h=void 0===f||f;return t.plugins,e.jsx(se,{initialWidth:n,initialHeight:o,initialTemplate:a,children:e.jsx(Pt,{onSave:r,containerClassName:l,toolbarClassName:c,canvasClassName:d,showLeftSidebar:m,showRightSidebar:h})})},Rt=D.Provider,Et=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(D.Viewport,I({ref:a,className:J("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r)},s))}));Et.displayName=D.Viewport.displayName;var Lt=d.cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ut=k.forwardRef((function(t,a){var r=t.className,s=t.variant,n=W(t,["className","variant"]);return e.jsx(D.Root,I({ref:a,className:J(Lt({variant:s}),r)},n))}));Ut.displayName=D.Root.displayName,k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(D.Action,I({ref:a,className:J("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r)},s))})).displayName=D.Action.displayName;var Dt=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(D.Close,I({ref:a,className:J("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":""},s,{children:e.jsx(u.X,{className:"h-4 w-4"})}))}));Dt.displayName=D.Close.displayName;var It=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(D.Title,I({ref:a,className:J("text-sm font-semibold",r)},s))}));It.displayName=D.Title.displayName;var Wt=k.forwardRef((function(t,a){var r=t.className,s=W(t,["className"]);return e.jsx(D.Description,I({ref:a,className:J("text-sm opacity-90",r)},s))}));function Mt(){var t=Ne().toasts;return e.jsxs(Rt,{children:[t.map((function(t){var a=t.id,r=t.title,s=t.description,n=t.action,i=W(t,["id","title","description","action"]);return e.jsxs(Ut,I({},i,{children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(It,{children:r}),s&&e.jsx(Wt,{children:s})]}),n,e.jsx(Dt,{})]}),a)})),e.jsx(Et,{})]})}Wt.displayName=D.Description.displayName,a.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx((function(){return e.jsx("div",{className:"design-editor-plugin ",children:e.jsxs(H,{children:[e.jsx(Ot,I()),e.jsx(Mt,{})]})})}),{})}));
//# sourceMappingURL=index.js.map
